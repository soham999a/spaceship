<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>ðŸš€</text></svg>" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Space Tourism Portal 2090</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;900&display=swap" rel="stylesheet">
    <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Three.js for 3D graphics -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <!-- Three.js Controls -->
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/controls/OrbitControls.js"></script>
    <meta name="description" content="Explore the galaxy with Space Tourism Portal 2090 - Book your interplanetary vacation today!">
    <style>
      body {
        font-family: 'Orbitron', monospace;
        background: linear-gradient(135deg, #0a0a0f 0%, #1a0b2e 50%, #16213e 100%);
        min-height: 100vh;
        overflow-x: hidden;
      }

      .neon-glow {
        box-shadow:
          0 0 5px currentColor,
          0 0 10px currentColor,
          0 0 15px currentColor,
          0 0 20px currentColor;
      }

      .cosmic-bg {
        background:
          radial-gradient(ellipse at 20% 50%, rgba(191, 0, 255, 0.3) 0%, transparent 50%),
          radial-gradient(ellipse at 80% 20%, rgba(0, 245, 255, 0.3) 0%, transparent 50%),
          radial-gradient(ellipse at 40% 80%, rgba(255, 0, 128, 0.2) 0%, transparent 50%),
          linear-gradient(135deg, #0a0a0f 0%, #1a0b2e 50%, #16213e 100%);
      }

      .stars, .stars2, .stars3 {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        pointer-events: none;
      }

      .stars {
        background: transparent url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><circle cx="20" cy="20" r="0.5" fill="white" opacity="0.8"/><circle cx="80" cy="40" r="0.3" fill="white" opacity="0.6"/><circle cx="40" cy="80" r="0.4" fill="white" opacity="0.7"/><circle cx="90" cy="90" r="0.2" fill="white" opacity="0.5"/><circle cx="10" cy="60" r="0.3" fill="white" opacity="0.6"/></svg>') repeat;
        animation: move-stars 50s linear infinite;
      }

      .stars2 {
        background: transparent url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><circle cx="30" cy="30" r="0.3" fill="cyan" opacity="0.4"/><circle cx="70" cy="70" r="0.2" fill="cyan" opacity="0.3"/><circle cx="50" cy="10" r="0.4" fill="cyan" opacity="0.5"/></svg>') repeat;
        animation: move-stars 100s linear infinite;
      }

      .stars3 {
        background: transparent url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><circle cx="60" cy="20" r="0.2" fill="purple" opacity="0.3"/><circle cx="20" cy="80" r="0.3" fill="purple" opacity="0.4"/></svg>') repeat;
        animation: move-stars 150s linear infinite;
      }

      @keyframes move-stars {
        from { transform: translateY(0px); }
        to { transform: translateY(-100vh); }
      }

      .line-clamp-2 {
        display: -webkit-box;
        -webkit-line-clamp: 2;
        -webkit-box-orient: vertical;
        overflow: hidden;
      }
    </style>
  </head>
  <body>
    <div class="stars"></div>
    <div class="stars2"></div>
    <div class="stars3"></div>
    
    <div id="root"></div>

    <script type="text/babel">
      const { useState, useEffect, useReducer } = React;

      // NASA API Configuration
      const NASA_API_KEY = 'uOMS8AKUbcK9MLgnDaVN6wvYXpwfiOBW1SetEXzr';
      const NASA_EXOPLANET_API = 'https://exoplanetarchive.ipac.caltech.edu/TAP/sync';
      const NASA_IMAGE_API = 'https://images-api.nasa.gov/search';

      // Multiple CORS proxy options for better reliability
      const CORS_PROXIES = [
        'https://api.allorigins.win/get?url=',
        'https://corsproxy.io/?',
        'https://cors-anywhere.herokuapp.com/'
      ];

      // Spaceship image generator with reliable fallbacks
      const generateSpaceshipImage = (spaceshipName, manufacturer = 'generic') => {
        const spaceshipImages = {
          // SpaceX Fleet
          'starship': 'https://images.unsplash.com/photo-1517976487492-5750f3195933?w=400&h=300&fit=crop',
          'spacex-dragon': 'https://images.unsplash.com/photo-1446776653964-20c1d3a81b06?w=400&h=300&fit=crop',
          'spacex-super-heavy': 'https://images.unsplash.com/photo-1517976487492-5750f3195933?w=400&h=300&fit=crop',

          // NASA Fleet
          'orion': 'https://images.unsplash.com/photo-1581833971358-2c8b550f87b3?w=400&h=300&fit=crop',
          'nasa-gateway': 'https://images.unsplash.com/photo-1608178398319-48f814d0750c?w=400&h=300&fit=crop',

          // Commercial Fleet
          'blue-origin-new-shepard': 'https://images.unsplash.com/photo-1614728263952-84ea256f9679?w=400&h=300&fit=crop',
          'virgin-galactic-unity': 'https://images.unsplash.com/photo-1462331940025-496dfbfc7564?w=400&h=300&fit=crop',
          'boeing-starliner': 'https://images.unsplash.com/photo-1419242902214-272b3f66ee7a?w=400&h=300&fit=crop',
          'axiom-station-transport': 'https://images.unsplash.com/photo-1502134249126-9f3755a50d78?w=400&h=300&fit=crop',

          // International Fleet
          'roscosmos-soyuz': 'https://images.unsplash.com/photo-1506905925346-21bda4d32df4?w=400&h=300&fit=crop',
          'esa-hermes': 'https://images.unsplash.com/photo-1581833971358-2c8b550f87b3?w=400&h=300&fit=crop',
          'jaxa-hayabusa': 'https://images.unsplash.com/photo-1614728263952-84ea256f9679?w=400&h=300&fit=crop',

          // Advanced/Fictional Fleet
          'ranger': 'https://images.unsplash.com/photo-1608178398319-48f814d0750c?w=400&h=300&fit=crop',
          'falcon': 'https://images.unsplash.com/photo-1517976487492-5750f3195933?w=400&h=300&fit=crop',
          'enterprise': 'https://images.unsplash.com/photo-1581833971358-2c8b550f87b3?w=400&h=300&fit=crop',
          'breakthrough-starshot': 'https://images.unsplash.com/photo-1462331940025-496dfbfc7564?w=400&h=300&fit=crop',
          'relativity-terran-r': 'https://images.unsplash.com/photo-1419242902214-272b3f66ee7a?w=400&h=300&fit=crop',

          // Fallback images by type
          'default_spaceship': [
            'https://images.unsplash.com/photo-1517976487492-5750f3195933?w=400&h=300&fit=crop',
            'https://images.unsplash.com/photo-1446776653964-20c1d3a81b06?w=400&h=300&fit=crop',
            'https://images.unsplash.com/photo-1581833971358-2c8b550f87b3?w=400&h=300&fit=crop',
            'https://images.unsplash.com/photo-1608178398319-48f814d0750c?w=400&h=300&fit=crop',
            'https://images.unsplash.com/photo-1614728263952-84ea256f9679?w=400&h=300&fit=crop'
          ]
        };

        const shipKey = spaceshipName.toLowerCase().replace(/[^a-z0-9]/g, '');

        // Try specific spaceship first
        if (spaceshipImages[shipKey]) {
          return spaceshipImages[shipKey];
        }

        // Use random fallback
        const defaultImages = spaceshipImages.default_spaceship;
        const randomIndex = Math.abs(spaceshipName.split('').reduce((a, b) => a + b.charCodeAt(0), 0)) % defaultImages.length;
        return defaultImages[randomIndex];
      };

      // Enhanced Spaceship Fleet
      const spaceshipsData = [
        {
          id: 'starship',
          name: "SpaceX Starship MK-VII 'Endeavour'",
          emoji: 'ðŸš€',
          image: generateSpaceshipImage('starship'),
          maxSpeed: 58000,
          speed: '58,000 km/h',
          warpCapable: false,
          fuelType: 'Liquid Methane/LOX + Nuclear Thermal',
          amenities: ['Hibernation Pods', 'Quantum Internet', 'Zero-G Observatory', 'Hydroponic Gardens', 'Medical Bay'],
          capacity: 100,
          costMultiplier: 1.0,
          priceMultiplier: 1.0,
          luxuryLevel: 4,
          description: 'The workhorse of interplanetary travel. This seventh-generation Starship features nuclear thermal propulsion, advanced life support, and proven reliability across 847 successful missions.',
          safetyRating: 9.5,
          comfortLevel: 8,
          range: 'Interplanetary',
          manufacturer: 'SpaceX Corporation',
          yearBuilt: 2089,
          certification: 'ISA-Class A Interplanetary',
          lastMaintenance: '2090-06-15',
          totalFlightHours: 12847,
          successfulMissions: 847,
          engineType: 'Raptor-VII Nuclear Thermal',
          thrust: '2,400 kN',
          specificImpulse: '450 seconds',
          deltaV: '15,000 m/s',
          radiationShielding: 'Polyethylene + Electromagnetic',
          gravityGeneration: 'Rotational (0.38g)',
          lifeSupport: 'Closed-loop ECLSS',
          emergencyEscape: '12 autonomous pods',
          features: {
            cryosleep: true,
            wifi: true,
            restaurant: false,
            gym: true,
            spa: false,
            entertainment: true,
          },
          technicalSpecs: {
            length: '120m',
            diameter: '9m',
            mass: '1,200 tonnes',
            cargoCapacity: '150 tonnes',
            fuelCapacity: '1,200 tonnes',
            powerGeneration: 'Nuclear Reactor + Solar Arrays',
            communicationRange: '50 AU',
            operationalRange: 'Inner Solar System'
          },
          crewRequirements: {
            pilot: 'Level 5 Interplanetary License',
            engineer: 'Nuclear Propulsion Certified',
            medic: 'Space Medicine Specialist',
            minimumCrew: 4,
            maximumCrew: 8
          }
        },
        {
          id: 'orion',
          name: 'NASA Orion Deep Space Explorer "Artemis IX"',
          emoji: 'ðŸ›¸',
          image: generateSpaceshipImage('orion'),
          maxSpeed: 40000,
          speed: '40,000 km/h',
          warpCapable: false,
          fuelType: 'Xenon Ion Propulsion + Chemical Backup',
          amenities: ['Micro-Gravity Fitness Center', 'Advanced Medical Suite', 'Research Laboratory', 'Quantum Communication Array'],
          capacity: 6,
          costMultiplier: 0.8,
          priceMultiplier: 0.8,
          luxuryLevel: 3,
          description: 'NASA\'s premier deep space exploration vessel. Built for extended missions beyond the asteroid belt with cutting-edge scientific equipment and unmatched safety protocols.',
          safetyRating: 9.8,
          comfortLevel: 6,
          range: 'Deep Space',
          manufacturer: 'NASA/Lockheed Martin',
          yearBuilt: 2087,
          certification: 'ISA-Class AA Deep Space',
          lastMaintenance: '2090-07-01',
          totalFlightHours: 8934,
          successfulMissions: 234,
          engineType: 'NEXT-C Ion Thruster Array',
          thrust: '236 mN (continuous)',
          specificImpulse: '4,190 seconds',
          deltaV: '25,000 m/s',
          radiationShielding: 'Multi-layer Kevlar + Water',
          gravityGeneration: 'None (Micro-gravity)',
          lifeSupport: 'Advanced ECLSS with 99.7% recycling',
          emergencyEscape: '2 high-velocity escape pods',
          features: {
            cryosleep: false,
            wifi: true,
            restaurant: false,
            gym: true,
            spa: false,
            entertainment: false,
          },
          technicalSpecs: {
            length: '26.7m',
            diameter: '5.03m',
            mass: '26.5 tonnes',
            cargoCapacity: '8 tonnes',
            fuelCapacity: '15 tonnes xenon',
            powerGeneration: 'Multi-Mission RTG + Solar',
            communicationRange: '100 AU',
            operationalRange: 'Outer Solar System'
          },
          crewRequirements: {
            pilot: 'Level 7 Deep Space License',
            engineer: 'Ion Propulsion Specialist',
            scientist: 'PhD in Relevant Field',
            medic: 'Emergency Medicine Certified',
            minimumCrew: 3,
            maximumCrew: 6
          }
        },
        {
          id: 'ranger',
          name: 'Interstellar Ranger',
          emoji: 'ðŸ›°ï¸',
          image: generateSpaceshipImage('ranger'),
          maxSpeed: 299792458,
          speed: 'Warp 9.9',
          fuelType: 'Antimatter',
          amenities: ['Cryosleep', 'Buffet', 'Holodeck', 'Spa'],
          capacity: 50,
          costMultiplier: 2.5,
          priceMultiplier: 2.5,
          luxuryLevel: 5,
          description: 'Advanced warp-capable vessel for interstellar travel.',
          safetyRating: 9.2,
          comfortLevel: 9,
          range: 'Interstellar',
          manufacturer: 'Future Tech'
        },
        {
          id: 'falcon',
          name: 'Millennium Falcon',
          emoji: 'ðŸŒŸ',
          image: generateSpaceshipImage('falcon'),
          maxSpeed: 150000,
          speed: '150,000 km/h',
          fuelType: 'Hyperdrive',
          amenities: ['Smuggling Compartments', 'Chess Table', 'Escape Pods'],
          capacity: 6,
          costMultiplier: 1.5,
          priceMultiplier: 1.5,
          luxuryLevel: 2,
          description: 'Fast and agile, perfect for adventurous travelers.',
          safetyRating: 7.5,
          comfortLevel: 5,
          range: 'Galactic',
          manufacturer: 'Corellian Engineering'
        },
        {
          id: 'enterprise',
          name: 'USS Enterprise',
          emoji: 'â­',
          image: generateSpaceshipImage('enterprise'),
          maxSpeed: 299792458,
          speed: 'Warp 9.9',
          fuelType: 'Antimatter',
          amenities: ['Holodeck', 'Replicators', 'Transporter', 'Ten Forward'],
          capacity: 1000,
          costMultiplier: 3.0,
          priceMultiplier: 3.0,
          luxuryLevel: 5,
          description: 'The ultimate luxury starship with warp drive capability.',
          safetyRating: 9.9,
          comfortLevel: 10,
          range: 'Galactic',
          manufacturer: 'Starfleet'
        },
        {
          id: 'blue-origin-new-shepard',
          name: 'Blue Origin New Shepard XI',
          emoji: 'ðŸš€',
          image: generateSpaceshipImage('blue-origin-new-shepard'),
          maxSpeed: 3500,
          speed: '3,500 km/h',
          warpCapable: false,
          fuelType: 'Liquid Hydrogen/LOX',
          amenities: ['Large Windows', 'Zero-G Experience', 'Luxury Seating', 'Safety Systems'],
          capacity: 6,
          costMultiplier: 0.6,
          priceMultiplier: 0.6,
          luxuryLevel: 4,
          description: 'Suborbital luxury experience with the largest windows in space.',
          safetyRating: 9.7,
          comfortLevel: 8,
          range: 'Suborbital',
          manufacturer: 'Blue Origin',
          yearBuilt: 2088,
          certification: 'FAA Commercial Space',
          features: {
            cryosleep: false,
            wifi: false,
            restaurant: false,
            gym: false,
            spa: false,
            entertainment: true,
          }
        },
        {
          id: 'virgin-galactic-unity',
          name: 'Virgin Galactic Unity VII',
          emoji: 'âœˆï¸',
          image: generateSpaceshipImage('virgin-galactic-unity'),
          maxSpeed: 4200,
          speed: '4,200 km/h',
          warpCapable: false,
          fuelType: 'Hybrid Rocket Motor',
          amenities: ['Panoramic Views', 'Weightlessness Experience', 'Luxury Interior', 'Personal Space'],
          capacity: 8,
          costMultiplier: 0.7,
          priceMultiplier: 0.7,
          luxuryLevel: 5,
          description: 'The ultimate suborbital experience with unmatched luxury and views.',
          safetyRating: 9.4,
          comfortLevel: 9,
          range: 'Suborbital',
          manufacturer: 'Virgin Galactic',
          yearBuilt: 2089,
          certification: 'FAA Commercial Space',
          features: {
            cryosleep: false,
            wifi: true,
            restaurant: false,
            gym: false,
            spa: true,
            entertainment: true,
          }
        },
        {
          id: 'boeing-starliner',
          name: 'Boeing CST-100 Starliner "Atlas"',
          emoji: 'ðŸ›¸',
          image: generateSpaceshipImage('boeing-starliner'),
          maxSpeed: 28000,
          speed: '28,000 km/h',
          warpCapable: false,
          fuelType: 'Hypergolic Propellants',
          amenities: ['Automated Docking', 'Crew Displays', 'Emergency Systems', 'Comfortable Seating'],
          capacity: 7,
          costMultiplier: 0.9,
          priceMultiplier: 0.9,
          luxuryLevel: 3,
          description: 'Reliable crew transportation with proven safety record.',
          safetyRating: 9.6,
          comfortLevel: 7,
          range: 'Low Earth Orbit',
          manufacturer: 'Boeing',
          yearBuilt: 2087,
          certification: 'NASA Commercial Crew',
          features: {
            cryosleep: false,
            wifi: true,
            restaurant: false,
            gym: false,
            spa: false,
            entertainment: false,
          }
        },
        {
          id: 'spacex-dragon',
          name: 'SpaceX Dragon "Resilience"',
          emoji: 'ðŸ‰',
          image: generateSpaceshipImage('spacex-dragon'),
          maxSpeed: 28000,
          speed: '28,000 km/h',
          warpCapable: false,
          fuelType: 'Draco Thrusters',
          amenities: ['Touch Screen Controls', 'Autonomous Flight', 'Cargo Capacity', 'Crew Comfort'],
          capacity: 7,
          costMultiplier: 0.8,
          priceMultiplier: 0.8,
          luxuryLevel: 3,
          description: 'Modern crew vehicle with cutting-edge automation.',
          safetyRating: 9.5,
          comfortLevel: 7,
          range: 'Low Earth Orbit',
          manufacturer: 'SpaceX',
          yearBuilt: 2089,
          certification: 'NASA Commercial Crew',
          features: {
            cryosleep: false,
            wifi: true,
            restaurant: false,
            gym: false,
            spa: false,
            entertainment: true,
          }
        },
        {
          id: 'axiom-station-transport',
          name: 'Axiom Station Transport "Harmony"',
          emoji: 'ðŸ—ï¸',
          image: generateSpaceshipImage('axiom-station-transport'),
          maxSpeed: 27000,
          speed: '27,000 km/h',
          warpCapable: false,
          fuelType: 'Electric Propulsion',
          amenities: ['Luxury Quarters', 'Research Labs', 'Observation Deck', 'Fine Dining'],
          capacity: 12,
          costMultiplier: 1.8,
          priceMultiplier: 1.8,
          luxuryLevel: 5,
          description: 'Luxury space hotel transport with premium accommodations.',
          safetyRating: 9.3,
          comfortLevel: 10,
          range: 'Low Earth Orbit',
          manufacturer: 'Axiom Space',
          yearBuilt: 2090,
          certification: 'Commercial Space Station',
          features: {
            cryosleep: false,
            wifi: true,
            restaurant: true,
            gym: true,
            spa: true,
            entertainment: true,
          }
        },
        {
          id: 'breakthrough-starshot',
          name: 'Breakthrough Starshot "Icarus"',
          emoji: 'âš¡',
          image: generateSpaceshipImage('breakthrough-starshot'),
          maxSpeed: 60000000,
          speed: '20% Speed of Light',
          warpCapable: false,
          fuelType: 'Light Sail + Laser Propulsion',
          amenities: ['Nano-Technology', 'AI Navigation', 'Quantum Communication', 'Miniaturized Systems'],
          capacity: 2,
          costMultiplier: 4.0,
          priceMultiplier: 4.0,
          luxuryLevel: 2,
          description: 'Experimental ultra-high-speed probe for interstellar missions.',
          safetyRating: 8.5,
          comfortLevel: 3,
          range: 'Interstellar',
          manufacturer: 'Breakthrough Initiatives',
          yearBuilt: 2091,
          certification: 'Experimental Interstellar',
          features: {
            cryosleep: true,
            wifi: false,
            restaurant: false,
            gym: false,
            spa: false,
            entertainment: false,
          }
        },
        {
          id: 'nasa-gateway',
          name: 'NASA Lunar Gateway "Artemis Base"',
          emoji: 'ðŸŒ™',
          image: generateSpaceshipImage('nasa-gateway'),
          maxSpeed: 11000,
          speed: '11,000 km/h',
          warpCapable: false,
          fuelType: 'Solar Electric Propulsion',
          amenities: ['Lunar Observatory', 'Research Labs', 'Docking Ports', 'Long-term Habitation'],
          capacity: 4,
          costMultiplier: 1.2,
          priceMultiplier: 1.2,
          luxuryLevel: 3,
          description: 'Lunar orbital station for extended Moon missions.',
          safetyRating: 9.4,
          comfortLevel: 6,
          range: 'Cislunar',
          manufacturer: 'NASA International',
          yearBuilt: 2088,
          certification: 'Lunar Operations',
          features: {
            cryosleep: false,
            wifi: true,
            restaurant: false,
            gym: true,
            spa: false,
            entertainment: true,
          }
        },
        {
          id: 'roscosmos-soyuz',
          name: 'Roscosmos Soyuz MS-30 "Gagarin"',
          emoji: 'ðŸ‡·ðŸ‡º',
          image: generateSpaceshipImage('roscosmos-soyuz'),
          maxSpeed: 28000,
          speed: '28,000 km/h',
          warpCapable: false,
          fuelType: 'Hypergolic Propellants',
          amenities: ['Proven Reliability', 'Manual Controls', 'Compact Design', 'Emergency Systems'],
          capacity: 3,
          costMultiplier: 0.7,
          priceMultiplier: 0.7,
          luxuryLevel: 2,
          description: 'Time-tested and ultra-reliable crew vehicle with decades of success.',
          safetyRating: 9.8,
          comfortLevel: 4,
          range: 'Low Earth Orbit',
          manufacturer: 'Roscosmos',
          yearBuilt: 2089,
          certification: 'ISS Operations',
          features: {
            cryosleep: false,
            wifi: false,
            restaurant: false,
            gym: false,
            spa: false,
            entertainment: false,
          }
        },
        {
          id: 'esa-hermes',
          name: 'ESA Hermes "Europa Clipper II"',
          emoji: 'ðŸ‡ªðŸ‡º',
          image: generateSpaceshipImage('esa-hermes'),
          maxSpeed: 45000,
          speed: '45,000 km/h',
          warpCapable: false,
          fuelType: 'Ion Propulsion + Gravity Assist',
          amenities: ['Scientific Instruments', 'Deep Space Communication', 'Radiation Shielding', 'Automated Systems'],
          capacity: 4,
          costMultiplier: 1.1,
          priceMultiplier: 1.1,
          luxuryLevel: 3,
          description: 'European deep space explorer optimized for outer planet missions.',
          safetyRating: 9.2,
          comfortLevel: 5,
          range: 'Outer Solar System',
          manufacturer: 'European Space Agency',
          yearBuilt: 2090,
          certification: 'Deep Space Exploration',
          features: {
            cryosleep: true,
            wifi: true,
            restaurant: false,
            gym: false,
            spa: false,
            entertainment: false,
          }
        },
        {
          id: 'jaxa-hayabusa',
          name: 'JAXA Hayabusa3 "Asteroid Hunter"',
          emoji: 'ðŸ‡¯ðŸ‡µ',
          image: generateSpaceshipImage('jaxa-hayabusa'),
          maxSpeed: 35000,
          speed: '35,000 km/h',
          warpCapable: false,
          fuelType: 'Ion Engines + Sample Return',
          amenities: ['Sample Collection', 'Precision Landing', 'Asteroid Navigation', 'Scientific Analysis'],
          capacity: 2,
          costMultiplier: 1.3,
          priceMultiplier: 1.3,
          luxuryLevel: 2,
          description: 'Specialized asteroid mining and sample return vehicle.',
          safetyRating: 8.9,
          comfortLevel: 4,
          range: 'Asteroid Belt',
          manufacturer: 'Japan Aerospace Exploration Agency',
          yearBuilt: 2089,
          certification: 'Asteroid Operations',
          features: {
            cryosleep: false,
            wifi: true,
            restaurant: false,
            gym: false,
            spa: false,
            entertainment: false,
          }
        },
        {
          id: 'spacex-super-heavy',
          name: 'SpaceX Super Heavy "Booster 12"',
          emoji: 'ðŸš€',
          image: generateSpaceshipImage('spacex-super-heavy'),
          maxSpeed: 85000,
          speed: '85,000 km/h',
          warpCapable: false,
          fuelType: 'Liquid Methane/LOX + Nuclear',
          amenities: ['Massive Cargo Bay', 'Heavy Lift Capability', 'Reusable Design', 'Automated Landing'],
          capacity: 200,
          costMultiplier: 1.5,
          priceMultiplier: 1.5,
          luxuryLevel: 3,
          description: 'Massive heavy-lift vehicle for large-scale space construction and colonization.',
          safetyRating: 9.1,
          comfortLevel: 6,
          range: 'Interplanetary',
          manufacturer: 'SpaceX',
          yearBuilt: 2090,
          certification: 'Heavy Lift Operations',
          features: {
            cryosleep: true,
            wifi: true,
            restaurant: true,
            gym: true,
            spa: false,
            entertainment: true,
          }
        },
        {
          id: 'relativity-terran-r',
          name: 'Relativity Terran R "3D Printed"',
          emoji: 'ðŸ–¨ï¸',
          image: generateSpaceshipImage('relativity-terran-r'),
          maxSpeed: 42000,
          speed: '42,000 km/h',
          warpCapable: false,
          fuelType: 'Liquid Methane/LOX',
          amenities: ['3D Printed Structure', 'Rapid Manufacturing', 'Custom Configuration', 'Modern Avionics'],
          capacity: 20,
          costMultiplier: 0.9,
          priceMultiplier: 0.9,
          luxuryLevel: 3,
          description: 'Revolutionary 3D-printed rocket with rapid production capabilities.',
          safetyRating: 8.8,
          comfortLevel: 7,
          range: 'Low Earth Orbit',
          manufacturer: 'Relativity Space',
          yearBuilt: 2089,
          certification: 'Commercial Launch',
          features: {
            cryosleep: false,
            wifi: true,
            restaurant: false,
            gym: false,
            spa: false,
            entertainment: true,
          }
        }
      ];

      // Planet image generator with reliable fallbacks
      const generatePlanetImage = (planetName, type = 'exoplanet') => {
        const planetImages = {
          // Solar System Bodies
          'mars': 'https://images.unsplash.com/photo-1614728263952-84ea256f9679?w=400&h=300&fit=crop',
          'europa': 'https://images.unsplash.com/photo-1608178398319-48f814d0750c?w=400&h=300&fit=crop',
          'titan': 'https://images.unsplash.com/photo-1614313913007-2b4ae8ce32d6?w=400&h=300&fit=crop',
          'enceladus': 'https://images.unsplash.com/photo-1614728894747-a83421e2b9c9?w=400&h=300&fit=crop',
          'ganymede': 'https://images.unsplash.com/photo-1581833971358-2c8b550f87b3?w=400&h=300&fit=crop',
          'callisto': 'https://images.unsplash.com/photo-1608178398319-48f814d0750c?w=400&h=300&fit=crop',
          'ceres': 'https://images.unsplash.com/photo-1614728263952-84ea256f9679?w=400&h=300&fit=crop',

          // NASA Exoplanets
          'kepler-452b': 'https://images.unsplash.com/photo-1446776653964-20c1d3a81b06?w=400&h=300&fit=crop',
          'proxima-centauri-b': 'https://images.unsplash.com/photo-1462331940025-496dfbfc7564?w=400&h=300&fit=crop',
          'trappist-1e': 'https://images.unsplash.com/photo-1419242902214-272b3f66ee7a?w=400&h=300&fit=crop',
          'gliese-581g': 'https://images.unsplash.com/photo-1502134249126-9f3755a50d78?w=400&h=300&fit=crop',
          'hd-40307g': 'https://images.unsplash.com/photo-1506905925346-21bda4d32df4?w=400&h=300&fit=crop',

          // Fictional Worlds
          'pandora': 'https://images.unsplash.com/photo-1581833971358-2c8b550f87b3?w=400&h=300&fit=crop',
          'tatooine': 'https://images.unsplash.com/photo-1509773896068-7fd415d91e2e?w=400&h=300&fit=crop',
          'coruscant': 'https://images.unsplash.com/photo-1480714378408-67cf0d13bc1f?w=400&h=300&fit=crop',
          'vulcan': 'https://images.unsplash.com/photo-1509773896068-7fd415d91e2e?w=400&h=300&fit=crop',
          'risa': 'https://images.unsplash.com/photo-1439066615861-d1af74d74000?w=400&h=300&fit=crop',
          'naboo': 'https://images.unsplash.com/photo-1439066615861-d1af74d74000?w=400&h=300&fit=crop',
          'hoth': 'https://images.unsplash.com/photo-1551582045-6ec9c11d8697?w=400&h=300&fit=crop',
          'endor': 'https://images.unsplash.com/photo-1441974231531-c6227db76b6e?w=400&h=300&fit=crop',
          'kamino': 'https://images.unsplash.com/photo-1439066615861-d1af74d74000?w=400&h=300&fit=crop',
          'mustafar': 'https://images.unsplash.com/photo-1506905925346-21bda4d32df4?w=400&h=300&fit=crop',

          // Reliable fallback images by type
          'default_exoplanet': [
            'https://images.unsplash.com/photo-1446776653964-20c1d3a81b06?w=400&h=300&fit=crop',
            'https://images.unsplash.com/photo-1462331940025-496dfbfc7564?w=400&h=300&fit=crop',
            'https://images.unsplash.com/photo-1419242902214-272b3f66ee7a?w=400&h=300&fit=crop',
            'https://images.unsplash.com/photo-1502134249126-9f3755a50d78?w=400&h=300&fit=crop',
            'https://images.unsplash.com/photo-1506905925346-21bda4d32df4?w=400&h=300&fit=crop',
            'https://images.unsplash.com/photo-1581833971358-2c8b550f87b3?w=400&h=300&fit=crop',
            'https://images.unsplash.com/photo-1614728263952-84ea256f9679?w=400&h=300&fit=crop',
            'https://images.unsplash.com/photo-1608178398319-48f814d0750c?w=400&h=300&fit=crop'
          ],
          'default_fictional': [
            'https://images.unsplash.com/photo-1581833971358-2c8b550f87b3?w=400&h=300&fit=crop',
            'https://images.unsplash.com/photo-1509773896068-7fd415d91e2e?w=400&h=300&fit=crop',
            'https://images.unsplash.com/photo-1480714378408-67cf0d13bc1f?w=400&h=300&fit=crop',
            'https://images.unsplash.com/photo-1439066615861-d1af74d74000?w=400&h=300&fit=crop',
            'https://images.unsplash.com/photo-1441974231531-c6227db76b6e?w=400&h=300&fit=crop'
          ],
          'default_moon': [
            'https://images.unsplash.com/photo-1608178398319-48f814d0750c?w=400&h=300&fit=crop',
            'https://images.unsplash.com/photo-1614728894747-a83421e2b9c9?w=400&h=300&fit=crop',
            'https://images.unsplash.com/photo-1614313913007-2b4ae8ce32d6?w=400&h=300&fit=crop'
          ]
        };

        const planetKey = planetName.toLowerCase().replace(/[^a-z0-9]/g, '');

        // Try specific planet first
        if (planetImages[planetKey]) {
          return planetImages[planetKey];
        }

        // Use appropriate fallback based on type
        let defaultImages;
        switch (type) {
          case 'fictional':
            defaultImages = planetImages.default_fictional;
            break;
          case 'moon':
            defaultImages = planetImages.default_moon;
            break;
          case 'exoplanet':
          case 'planet':
          default:
            defaultImages = planetImages.default_exoplanet;
            break;
        }

        // Use consistent random selection based on planet name
        const randomIndex = Math.abs(planetName.split('').reduce((a, b) => a + b.charCodeAt(0), 0)) % defaultImages.length;
        return defaultImages[randomIndex];
      };

      // Enhanced Planet Database with NASA data
      const enhancedPlanetsData = [
        // Solar System Planets
        {
          id: 'mars',
          name: 'Mars',
          type: 'planet',
          distance: 0.000024,
          baseCost: 25000,
          description: 'The Red Planet - humanity\'s next frontier with established colonies.',
          image: generatePlanetImage('mars', 'planet'),
          temperature: '-80Â°C to 20Â°C',
          gravity: '0.38g',
          atmosphere: 'Thin CO2',
          population: '1,000 colonists',
          tags: ['Solar System', 'Colonized', 'Red Planet', 'Terraforming'],
          hasWater: true,
          habitable: true,
          discoveryYear: 'Ancient',
          facts: ['Two moons: Phobos and Deimos', 'Largest volcano in solar system', 'Evidence of ancient water'],
          attractions: ['Olympus Mons', 'Valles Marineris', 'Polar Ice Caps'],
          dayLength: '24h 37m',
          yearLength: '687 Earth days',
          travelPackages: ['Mars Base Alpha Tour', 'Olympus Mons Expedition', 'Polar Ice Cap Adventure'],
          activities: ['Rover Expeditions', 'Underground Cave Tours', 'Martian Geology Study', 'Aurora Watching']
        },
        {
          id: 'europa',
          name: 'Europa',
          type: 'moon',
          distance: 0.0033,
          baseCost: 45000,
          description: 'Jupiter\'s ice-covered moon with a subsurface ocean.',
          image: generatePlanetImage('europa', 'moon'),
          temperature: '-160Â°C',
          gravity: '0.134g',
          atmosphere: 'Thin oxygen',
          population: 'Research stations',
          tags: ['Jupiter Moon', 'Ocean World', 'Ice', 'Research'],
          hasWater: true,
          habitable: false,
          discoveryYear: 1610,
          facts: ['Subsurface ocean twice the volume of Earth\'s', 'Smooth ice surface', 'Potential for life'],
          attractions: ['Ice Geysers', 'Subsurface Ocean Tours', 'Research Stations']
        },
        // NASA Exoplanets
        {
          id: 'kepler-452b',
          name: 'Kepler-452b',
          type: 'exoplanet',
          distance: 1402,
          baseCost: 75000,
          description: 'Earth\'s cousin - a potentially habitable super-Earth in the habitable zone.',
          image: generatePlanetImage('kepler-452b', 'exoplanet'),
          temperature: '15Â°C (estimated)',
          gravity: '1.6g',
          atmosphere: 'Unknown',
          population: 'Uninhabited',
          tags: ['NASA', 'Habitable Zone', 'Super-Earth', 'Earth-like'],
          hasWater: true,
          habitable: true,
          discoveryYear: 2015,
          facility: 'Kepler Space Telescope',
          facts: ['60% larger than Earth', '385 days orbital period', 'Receives 10% more energy than Earth'],
          attractions: ['Potentially habitable surface', 'Earth-like conditions', 'Alien landscapes']
        },
        {
          id: 'trappist-1e',
          name: 'TRAPPIST-1e',
          type: 'exoplanet',
          distance: 40,
          baseCost: 85000,
          description: 'One of seven Earth-sized planets in the TRAPPIST-1 system.',
          image: generatePlanetImage('trappist-1e', 'exoplanet'),
          temperature: '-22Â°C (estimated)',
          gravity: '0.91g',
          atmosphere: 'Unknown',
          population: 'Uninhabited',
          tags: ['NASA', 'Earth-sized', 'Habitable Zone', 'Multi-planet System'],
          hasWater: true,
          habitable: true,
          discoveryYear: 2017,
          facility: 'Spitzer Space Telescope',
          facts: ['Part of 7-planet system', 'Tidally locked', 'Rocky composition'],
          attractions: ['Seven-planet system views', 'Unique day/night cycle', 'Red dwarf star']
        },
        // Fictional Worlds
        {
          id: 'pandora',
          name: 'Pandora',
          type: 'fictional',
          distance: 4.37,
          baseCost: 150000,
          description: 'Lush moon of Polyphemus with floating mountains and bioluminescent forests.',
          temperature: '25Â°C',
          gravity: '0.8g',
          atmosphere: 'Toxic to humans (breathing apparatus required)',
          population: 'Na\'vi indigenous species',
          tags: ['Avatar', 'Bioluminescent', 'Floating Mountains', 'Alien Life'],
          hasWater: true,
          habitable: false,
          discoveryYear: 2154,
          facts: ['Floating Hallelujah Mountains', 'Neural network trees', 'Unobtainium deposits'],
          attractions: ['Tree of Souls', 'Floating Mountains', 'Bioluminescent Forest']
        },
        {
          id: 'tatooine',
          name: 'Tatooine',
          type: 'fictional',
          distance: 43000,
          baseCost: 95000,
          description: 'Desert planet with twin suns and moisture farming settlements.',
          temperature: '45Â°C day / -5Â°C night',
          gravity: '1.0g',
          atmosphere: 'Breathable',
          population: '200,000 settlers',
          tags: ['Star Wars', 'Desert', 'Twin Suns', 'Moisture Farming'],
          hasWater: false,
          habitable: true,
          discoveryYear: 'Long ago',
          facts: ['Twin suns: Tatoo I and Tatoo II', 'Sandcrawler vehicles', 'Podracing circuits'],
          attractions: ['Mos Eisley Cantina', 'Podracing Arena', 'Jawa Sandcrawlers']
        },
        // More Solar System Bodies
        {
          id: 'titan',
          name: 'Titan',
          type: 'moon',
          distance: 0.000076,
          baseCost: 55000,
          description: 'Saturn\'s largest moon with thick atmosphere and methane lakes.',
          image: generatePlanetImage('titan', 'moon'),
          temperature: '-179Â°C',
          gravity: '0.14g',
          atmosphere: 'Thick nitrogen',
          population: 'Research stations',
          tags: ['Saturn Moon', 'Methane Lakes', 'Thick Atmosphere'],
          hasWater: true,
          habitable: false,
          discoveryYear: 1655,
          facts: ['Larger than Mercury', 'Methane weather cycle', 'Subsurface ocean'],
          attractions: ['Methane Lakes', 'Hydrocarbon Dunes', 'Research Outposts']
        },
        {
          id: 'enceladus',
          name: 'Enceladus',
          type: 'moon',
          distance: 0.000076,
          baseCost: 65000,
          description: 'Saturn\'s ice moon with spectacular water geysers.',
          image: generatePlanetImage('enceladus', 'moon'),
          temperature: '-201Â°C',
          gravity: '0.0113g',
          atmosphere: 'Water vapor',
          population: 'Automated research probes',
          tags: ['Saturn Moon', 'Ice Geysers', 'Subsurface Ocean'],
          hasWater: true,
          habitable: false,
          discoveryYear: 1789,
          facts: ['Tiger stripe fractures', 'Active water geysers', 'Potential for life'],
          attractions: ['Geyser Fields', 'Ice Caves', 'South Polar Terrain']
        },
        {
          id: 'ganymede',
          name: 'Ganymede',
          type: 'moon',
          distance: 0.000033,
          baseCost: 50000,
          description: 'Jupiter\'s largest moon and the largest moon in the solar system.',
          image: generatePlanetImage('ganymede', 'moon'),
          temperature: '-181Â°C',
          gravity: '0.146g',
          atmosphere: 'Thin oxygen',
          population: 'Mining operations',
          tags: ['Jupiter Moon', 'Largest Moon', 'Magnetic Field'],
          hasWater: true,
          habitable: false,
          discoveryYear: 1610,
          facts: ['Own magnetic field', 'Larger than Mercury', 'Subsurface ocean'],
          attractions: ['Magnetic Anomalies', 'Ice Mining Facilities', 'Crater Fields']
        },
        {
          id: 'callisto',
          name: 'Callisto',
          type: 'moon',
          distance: 0.000033,
          baseCost: 48000,
          description: 'Jupiter\'s heavily cratered outermost moon.',
          image: generatePlanetImage('callisto', 'moon'),
          temperature: '-139Â°C',
          gravity: '0.126g',
          atmosphere: 'Very thin CO2',
          population: 'Deep space research station',
          tags: ['Jupiter Moon', 'Ancient Surface', 'Low Radiation'],
          hasWater: true,
          habitable: false,
          discoveryYear: 1610,
          facts: ['Most cratered body in solar system', 'Low radiation environment', 'Possible subsurface ocean'],
          attractions: ['Valhalla Crater', 'Ancient Impact Sites', 'Deep Space Observatory']
        },
        {
          id: 'ceres',
          name: 'Ceres',
          type: 'dwarf planet',
          distance: 0.000028,
          baseCost: 35000,
          description: 'The largest object in the asteroid belt and a dwarf planet.',
          image: generatePlanetImage('ceres', 'dwarf planet'),
          temperature: '-105Â°C',
          gravity: '0.029g',
          atmosphere: 'Water vapor',
          population: 'Mining colonies',
          tags: ['Asteroid Belt', 'Dwarf Planet', 'Water Ice'],
          hasWater: true,
          habitable: false,
          discoveryYear: 1801,
          facts: ['Bright spots (salt deposits)', 'Water ice deposits', 'Largest asteroid'],
          attractions: ['Occator Crater', 'Bright Spots', 'Mining Operations']
        },
        // More NASA Exoplanets
        {
          id: 'proxima-centauri-b',
          name: 'Proxima Centauri b',
          type: 'exoplanet',
          distance: 4.24,
          baseCost: 120000,
          description: 'The closest exoplanet to Earth, orbiting in the habitable zone.',
          image: generatePlanetImage('proxima-centauri-b', 'exoplanet'),
          temperature: '-39Â°C (estimated)',
          gravity: '1.17g',
          atmosphere: 'Unknown',
          population: 'Uninhabited',
          tags: ['NASA', 'Closest Exoplanet', 'Habitable Zone', 'Red Dwarf'],
          hasWater: true,
          habitable: true,
          discoveryYear: 2016,
          facility: 'European Southern Observatory',
          facts: ['Closest exoplanet to Earth', 'Tidally locked', '11.2 day orbit'],
          attractions: ['Eternal Sunset Zone', 'Red Dwarf Views', 'Potential Aurora']
        },
        {
          id: 'gliese-581g',
          name: 'Gliese 581g',
          type: 'exoplanet',
          distance: 20.3,
          baseCost: 95000,
          description: 'A potentially habitable super-Earth in the Goldilocks zone.',
          image: generatePlanetImage('gliese-581g', 'exoplanet'),
          temperature: '-12Â°C to -3Â°C',
          gravity: '1.1-1.7g',
          atmosphere: 'Unknown',
          population: 'Uninhabited',
          tags: ['NASA', 'Super-Earth', 'Goldilocks Zone', 'Tidally Locked'],
          hasWater: true,
          habitable: true,
          discoveryYear: 2010,
          facility: 'Keck Observatory',
          facts: ['Tidally locked', 'Permanent day/night sides', 'Rocky composition'],
          attractions: ['Twilight Zone', 'Temperature Gradients', 'Potential Weather Systems']
        },
        {
          id: 'hd-40307g',
          name: 'HD 40307g',
          type: 'exoplanet',
          distance: 42,
          baseCost: 110000,
          description: 'A super-Earth with potential for liquid water.',
          image: generatePlanetImage('hd-40307g', 'exoplanet'),
          temperature: '0Â°C (estimated)',
          gravity: '2.3g',
          atmosphere: 'Unknown',
          population: 'Uninhabited',
          tags: ['NASA', 'Super-Earth', 'Habitable Zone', 'High Gravity'],
          hasWater: true,
          habitable: true,
          discoveryYear: 2012,
          facility: 'HARPS Spectrograph',
          facts: ['7 times Earth\'s mass', '200-day orbit', 'Receives similar energy to Earth'],
          attractions: ['High Gravity Environment', 'Potential Oceans', 'Unique Landscapes']
        },
        // More Fictional Worlds
        {
          id: 'coruscant',
          name: 'Coruscant',
          type: 'fictional',
          distance: 25000,
          baseCost: 180000,
          description: 'The galactic capital - a planet-wide city with trillions of inhabitants.',
          image: generatePlanetImage('coruscant', 'fictional'),
          temperature: '20Â°C (climate controlled)',
          gravity: '1.0g',
          atmosphere: 'Recycled, breathable',
          population: '1 trillion beings',
          tags: ['Star Wars', 'City Planet', 'Galactic Capital', 'Urban'],
          hasWater: false,
          habitable: true,
          discoveryYear: 'Long ago',
          facts: ['Entire planet is one city', 'Multiple levels of civilization', 'Galactic Senate location'],
          attractions: ['Jedi Temple', 'Senate Building', 'Underworld Tours', 'Speeder Racing']
        },
        {
          id: 'vulcan',
          name: 'Vulcan',
          type: 'fictional',
          distance: 16.5,
          baseCost: 85000,
          description: 'Desert planet home to the logical Vulcan species.',
          image: generatePlanetImage('vulcan', 'fictional'),
          temperature: '50Â°C average',
          gravity: '1.4g',
          atmosphere: 'Thin, hot',
          population: '6 billion Vulcans',
          tags: ['Star Trek', 'Desert', 'Logic', 'Ancient Civilization'],
          hasWater: false,
          habitable: true,
          discoveryYear: '2063',
          facts: ['Birthplace of Spock', 'Ancient temples', 'Extremely logical society'],
          attractions: ['Mount Seleya', 'Vulcan Academy', 'Ancient Temples', 'Meditation Centers']
        },
        {
          id: 'risa',
          name: 'Risa',
          type: 'fictional',
          distance: 8.2,
          baseCost: 200000,
          description: 'The ultimate pleasure planet with perfect weather and luxury resorts.',
          image: generatePlanetImage('risa', 'fictional'),
          temperature: '24Â°C year-round',
          gravity: '0.9g',
          atmosphere: 'Perfect, climate controlled',
          population: '50 million (mostly tourists)',
          tags: ['Star Trek', 'Pleasure Planet', 'Luxury', 'Perfect Weather'],
          hasWater: true,
          habitable: true,
          discoveryYear: '2152',
          facts: ['Weather is artificially controlled', 'Famous for hospitality', 'No crime allowed'],
          attractions: ['Luxury Resorts', 'Perfect Beaches', 'Spa Treatments', 'Adventure Sports']
        },
        {
          id: 'naboo',
          name: 'Naboo',
          type: 'fictional',
          distance: 18.7,
          baseCost: 140000,
          description: 'Beautiful planet with underwater cities and peaceful meadows.',
          image: generatePlanetImage('naboo', 'fictional'),
          temperature: '22Â°C average',
          gravity: '0.85g',
          atmosphere: 'Perfect, breathable',
          population: '4.5 billion (Humans and Gungans)',
          tags: ['Star Wars', 'Underwater Cities', 'Peaceful', 'Beautiful'],
          hasWater: true,
          habitable: true,
          discoveryYear: 'Long ago',
          facts: ['Underwater Gungan cities', 'Peaceful coexistence', 'Beautiful landscapes'],
          attractions: ['Underwater Cities', 'Royal Palace', 'Meadow Tours', 'Gungan Culture']
        },
        {
          id: 'hoth',
          name: 'Hoth',
          type: 'fictional',
          distance: 22.1,
          baseCost: 75000,
          description: 'Frozen ice planet perfect for extreme winter sports.',
          image: generatePlanetImage('hoth', 'fictional'),
          temperature: '-60Â°C average',
          gravity: '1.1g',
          atmosphere: 'Breathable, extremely cold',
          population: 'Wildlife and research stations',
          tags: ['Star Wars', 'Ice Planet', 'Extreme Cold', 'Adventure'],
          hasWater: true,
          habitable: false,
          discoveryYear: 'Long ago',
          facts: ['Site of Rebel Alliance base', 'Inhabited by Wampas', 'Constant blizzards'],
          attractions: ['Ice Caves', 'Tauntaun Riding', 'Rebel Base Tours', 'Ice Climbing']
        },
        {
          id: 'endor',
          name: 'Endor',
          type: 'fictional',
          distance: 14.3,
          baseCost: 90000,
          description: 'Forest moon inhabited by the adorable Ewoks.',
          image: generatePlanetImage('endor', 'fictional'),
          temperature: '18Â°C average',
          gravity: '0.85g',
          atmosphere: 'Fresh, breathable',
          population: '30 million Ewoks',
          tags: ['Star Wars', 'Forest Moon', 'Ewoks', 'Primitive Culture'],
          hasWater: true,
          habitable: true,
          discoveryYear: 'Long ago',
          facts: ['Dense forest moon', 'Primitive but wise Ewoks', 'Tree-top villages'],
          attractions: ['Ewok Villages', 'Forest Canopy Tours', 'Tree House Living', 'Cultural Exchange']
        },
        {
          id: 'kamino',
          name: 'Kamino',
          type: 'fictional',
          distance: 31.2,
          baseCost: 110000,
          description: 'Ocean planet with advanced cloning facilities.',
          image: generatePlanetImage('kamino', 'fictional'),
          temperature: '15Â°C average',
          gravity: '1.13g',
          atmosphere: 'Humid, breathable',
          population: '1 billion Kaminoans',
          tags: ['Star Wars', 'Ocean Planet', 'Cloning', 'Advanced Technology'],
          hasWater: true,
          habitable: true,
          discoveryYear: 'Long ago',
          facts: ['Entirely covered by ocean', 'Advanced cloning technology', 'Constant storms'],
          attractions: ['Cloning Facilities', 'Ocean Platforms', 'Storm Watching', 'Kaminoan Culture']
        },
        {
          id: 'mustafar',
          name: 'Mustafar',
          type: 'fictional',
          distance: 28.9,
          baseCost: 65000,
          description: 'Volcanic planet with lava rivers and mining operations.',
          image: generatePlanetImage('mustafar', 'fictional'),
          temperature: '1900Â°C surface',
          gravity: '1.0g',
          atmosphere: 'Toxic, requires environmental suit',
          population: 'Mining droids and operators',
          tags: ['Star Wars', 'Volcanic', 'Extreme Heat', 'Mining'],
          hasWater: false,
          habitable: false,
          discoveryYear: 'Long ago',
          facts: ['Entirely volcanic', 'Rich in rare minerals', 'Extremely dangerous'],
          attractions: ['Lava Mining Tours', 'Volcanic Observatory', 'Heat Resistance Training']
        }
      ];

      // Function to fetch NASA images for planets
      const fetchNASAImage = async (searchTerm) => {
        try {
          const response = await fetch(`${NASA_IMAGE_API}?q=${encodeURIComponent(searchTerm)}&media_type=image&page_size=1`);
          const data = await response.json();

          if (data.collection.items.length > 0) {
            const item = data.collection.items[0];
            if (item.links && item.links.length > 0) {
              return item.links[0].href;
            }
          }

          // Fallback to generic space images
          const fallbackTerms = ['exoplanet', 'planet', 'space', 'nebula', 'galaxy'];
          for (const term of fallbackTerms) {
            try {
              const fallbackResponse = await fetch(`${NASA_IMAGE_API}?q=${term}&media_type=image&page_size=1`);
              const fallbackData = await fallbackResponse.json();
              if (fallbackData.collection.items.length > 0 && fallbackData.collection.items[0].links) {
                return fallbackData.collection.items[0].links[0].href;
              }
            } catch (e) {
              continue;
            }
          }

          return null;
        } catch (error) {
          console.error('Error fetching NASA image:', error);
          return null;
        }
      };

      // NASA API Functions with improved error handling
      const fetchNASAExoplanets = async () => {
        try {
          // Optimized query for better performance and reliability
          const query = `
            SELECT pl_name, sy_dist, pl_rade, pl_masse, pl_orbper, pl_eqt,
                   disc_year, disc_facility, disc_telescope, st_teff
            FROM ps
            WHERE pl_name IS NOT NULL
              AND sy_dist IS NOT NULL
              AND pl_rade IS NOT NULL
              AND sy_dist < 1000
            ORDER BY sy_dist ASC
            LIMIT 25
          `;

          const apiUrl = `${NASA_EXOPLANET_API}?query=${encodeURIComponent(query)}&format=json`;

          // Try multiple CORS proxies for better reliability
          let data = null;
          let lastError = null;

          for (const proxy of CORS_PROXIES) {
            try {
              console.log(`Trying NASA API with proxy: ${proxy}`);
              const proxyUrl = proxy.includes('allorigins')
                ? `${proxy}${encodeURIComponent(apiUrl)}`
                : `${proxy}${apiUrl}`;

              const response = await fetch(proxyUrl, {
                method: 'GET',
                headers: {
                  'Accept': 'application/json',
                }
              });

              if (!response.ok) {
                throw new Error(`HTTP ${response.status}: ${response.statusText}`);
              }

              const responseData = await response.json();

              // Handle allorigins response format
              if (proxy.includes('allorigins') && responseData.contents) {
                data = JSON.parse(responseData.contents);
              } else {
                data = responseData;
              }

              if (data && Array.isArray(data) && data.length > 0) {
                console.log(`Successfully fetched ${data.length} exoplanets from NASA API`);
                break;
              }
            } catch (error) {
              console.warn(`Proxy ${proxy} failed:`, error.message);
              lastError = error;
              continue;
            }
          }

          if (!data || !Array.isArray(data)) {
            throw new Error(`All proxies failed. Last error: ${lastError?.message}`);
          }

          // Fetch images for planets in parallel
          const planetsWithImages = await Promise.all(data.map(async (planet, index) => {
            const planetName = planet[0];
            const image = await fetchNASAImage(planetName) || await fetchNASAImage('exoplanet') || await fetchNASAImage('planet');

            return {
              id: `nasa-${index}`,
              name: planetName,
              type: 'exoplanet',
              distance: parseFloat(planet[1]) || Math.random() * 1000 + 10,
              baseCost: Math.round((parseFloat(planet[1]) || 100) * 50 + Math.random() * 50000),
              description: `A fascinating exoplanet discovered by NASA, located ${planet[1]} light-years away.`,
              temperature: planet[5] ? `${Math.round(planet[5] - 273)}Â°C` : 'Unknown',
              gravity: planet[3] ? `${(planet[3] * 0.00315).toFixed(1)}g` : 'Unknown',
              atmosphere: 'Unknown',
              population: 'Uninhabited',
              tags: ['NASA', 'Exoplanet', 'Real Data'],
              hasWater: Math.random() > 0.7,
              habitable: Math.random() > 0.8,
              discoveryYear: planet[6] || 'Unknown',
              facility: planet[7] || 'Unknown',
              telescope: planet[8] || 'Unknown',
              image: generatePlanetImage(planet[0] || `exoplanet-${index}`, 'exoplanet'), // Real NASA image
              radius: planet[2] ? `${planet[2].toFixed(2)} Earth radii` : 'Unknown',
              mass: planet[3] ? `${planet[3].toFixed(2)} Earth masses` : 'Unknown',
              orbitalPeriod: planet[4] ? `${planet[4].toFixed(1)} days` : 'Unknown',
              stellarTemp: planet[9] ? `${planet[9]} K` : 'Unknown',
              facts: [
                `Discovered in ${planet[6] || 'unknown year'}`,
                `Located ${planet[1]} light-years from Earth`,
                `Radius: ${planet[2] ? planet[2].toFixed(2) : 'unknown'} Earth radii`
              ]
            };
          }));

          return planetsWithImages;
        } catch (error) {
          console.error('Error fetching NASA exoplanets:', error);
          console.log('Falling back to static exoplanet data...');

          // Fallback to static NASA exoplanet data
          return [
            {
              id: 'kepler-452b',
              name: 'Kepler-452b',
              type: 'exoplanet',
              distance: 1402,
              baseCost: 75000,
              description: 'Earth\'s "cousin" - the first near-Earth-size planet in the habitable zone of a sun-like star.',
              temperature: '5Â°C',
              gravity: '2.0g',
              atmosphere: 'Unknown',
              population: 'Uninhabited',
              tags: ['NASA', 'Kepler', 'Habitable Zone'],
              hasWater: true,
              habitable: true,
              discoveryYear: 2015,
              facility: 'Kepler Space Telescope',
              telescope: 'Kepler',
              image: generatePlanetImage('kepler-452b', 'exoplanet'),
              radius: '1.63 Earth radii',
              mass: '5.0 Earth masses',
              orbitalPeriod: '385 days',
              stellarTemp: '5757 K',
              facts: [
                'Discovered in 2015 by the Kepler Space Telescope',
                'Located 1,402 light-years from Earth',
                'Orbits in the habitable zone of a sun-like star'
              ]
            },
            {
              id: 'proxima-centauri-b',
              name: 'Proxima Centauri b',
              type: 'exoplanet',
              distance: 4.24,
              baseCost: 25000,
              description: 'The closest known exoplanet to Earth, orbiting within the habitable zone of Proxima Centauri.',
              temperature: '-39Â°C',
              gravity: '1.1g',
              atmosphere: 'Unknown',
              population: 'Uninhabited',
              tags: ['NASA', 'Closest', 'Habitable Zone'],
              hasWater: true,
              habitable: true,
              discoveryYear: 2016,
              facility: 'European Southern Observatory',
              telescope: 'HARPS',
              image: generatePlanetImage('proxima-centauri-b', 'exoplanet'),
              radius: '1.1 Earth radii',
              mass: '1.3 Earth masses',
              orbitalPeriod: '11.2 days',
              stellarTemp: '3042 K',
              facts: [
                'Closest exoplanet to Earth at 4.24 light-years',
                'Discovered in 2016',
                'Orbits a red dwarf star'
              ]
            },
            {
              id: 'trappist-1e',
              name: 'TRAPPIST-1e',
              type: 'exoplanet',
              distance: 40.7,
              baseCost: 35000,
              description: 'One of seven Earth-sized planets in the TRAPPIST-1 system, likely to have liquid water.',
              temperature: '-22Â°C',
              gravity: '0.9g',
              atmosphere: 'Unknown',
              population: 'Uninhabited',
              tags: ['NASA', 'TRAPPIST-1', 'Seven Worlds'],
              hasWater: true,
              habitable: true,
              discoveryYear: 2017,
              facility: 'Spitzer Space Telescope',
              telescope: 'TRAPPIST',
              image: generatePlanetImage('trappist-1e', 'exoplanet'),
              radius: '0.92 Earth radii',
              mass: '0.77 Earth masses',
              orbitalPeriod: '6.1 days',
              stellarTemp: '2566 K',
              facts: [
                'Part of a seven-planet system',
                'Located 40.7 light-years away',
                'Most likely to have liquid water'
              ]
            }
          ];
        }
      };

      // Enhanced Space Tourism App
      function SpaceApp() {
        const [currentPage, setCurrentPage] = useState('home');
        const [loading, setLoading] = useState(true);
        const [planets, setPlanets] = useState(enhancedPlanetsData);
        const [filteredPlanets, setFilteredPlanets] = useState(enhancedPlanetsData);

        // Expose initial data to 3D galaxy map
        React.useEffect(() => {
          window.planetsData = planets;
          window.setSelectedPlanet = setSelectedPlanet;
          window.setCurrentPage = setCurrentPage;
        }, [planets]);
        const [selectedPlanet, setSelectedPlanet] = useState(null);
        const [selectedSpaceship, setSelectedSpaceship] = useState(null);
        const [searchTerm, setSearchTerm] = useState('');
        const [filters, setFilters] = useState({
          hasWater: false,
          habitable: false,
          type: 'all',
          maxDistance: 1000,
          maxCost: 200000
        });
        const [booking, setBooking] = useState({
          travelerName: '',
          email: '',
          passengers: 1,
          destination: null,
          spaceship: null,
          departureDate: '',
          returnDate: '',
          lodging: 'tent',
          activities: [],
          tripType: 'solo',
          isaId: '',
          emergencyContact: '',
          totalCost: 0
        });
        const [bookingStep, setBookingStep] = useState(1);
        const [bookingHistory, setBookingHistory] = useState([]);
        const [missionId, setMissionId] = useState('');
        const [showChatbot, setShowChatbot] = useState(false);
        const [chatMessages, setChatMessages] = useState([]);
        const [chatInput, setChatInput] = useState('');
        const [gameMode, setGameMode] = useState(false);
        const [gameState, setGameState] = useState({
          currentLocation: 'orbit',
          energy: 100,
          discoveries: [],
          score: 0,
          inventory: [],
          missionTime: 0
        });

        // Load NASA data on component mount
        useEffect(() => {
          const loadNASAData = async () => {
            setLoading(true);
            try {
              const nasaExoplanets = await fetchNASAExoplanets();
              const allPlanets = [...enhancedPlanetsData, ...nasaExoplanets];
              setPlanets(allPlanets);
              setFilteredPlanets(allPlanets);

              // Expose planets data to 3D galaxy map
              window.planetsData = allPlanets;
              window.setSelectedPlanet = setSelectedPlanet;
              window.setCurrentPage = setCurrentPage;

              console.log(`âœ… Loaded ${allPlanets.length} planets (${nasaExoplanets.length} from NASA)`);
            } catch (error) {
              console.error('Error loading NASA data:', error);
              setFilteredPlanets(enhancedPlanetsData);
            } finally {
              setLoading(false);
            }
          };

          loadNASAData();
        }, []);

        // Filter planets based on search and filters
        useEffect(() => {
          let filtered = planets.filter(planet => {
            const matchesSearch = planet.name.toLowerCase().includes(searchTerm.toLowerCase()) ||
                                planet.description.toLowerCase().includes(searchTerm.toLowerCase()) ||
                                planet.tags.some(tag => tag.toLowerCase().includes(searchTerm.toLowerCase()));

            const matchesWater = !filters.hasWater || planet.hasWater;
            const matchesHabitable = !filters.habitable || planet.habitable;
            const matchesType = filters.type === 'all' || planet.type === filters.type;
            const matchesDistance = planet.distance <= filters.maxDistance;
            const matchesCost = planet.baseCost <= filters.maxCost;

            return matchesSearch && matchesWater && matchesHabitable && matchesType && matchesDistance && matchesCost;
          });

          setFilteredPlanets(filtered);
        }, [planets, searchTerm, filters]);

        // Game functions
        const startPlanetExploration = () => {
          setGameMode(true);
          setGameState({
            currentLocation: 'orbit',
            energy: 100,
            discoveries: [],
            score: 0,
            inventory: [],
            missionTime: 0,
            missionComplete: false,
            achievements: []
          });
        };

        const exploreLocation = (location) => {
          if (gameState.energy < 10) {
            alert('Not enough energy! Rest to recover.');
            return;
          }

          const discoveries = [
            { type: 'mineral', name: 'Rare Crystal', points: 50, description: 'A beautiful crystalline formation with unknown properties' },
            { type: 'life', name: 'Microbial Life', points: 100, description: 'Microscopic organisms that could hold the key to life in the universe' },
            { type: 'artifact', name: 'Ancient Structure', points: 200, description: 'Mysterious ruins from an unknown civilization' },
            { type: 'resource', name: 'Water Ice', points: 30, description: 'Precious water ice deposits for future missions' },
            { type: 'phenomenon', name: 'Energy Anomaly', points: 75, description: 'Strange energy readings that defy explanation' },
            { type: 'life', name: 'Bioluminescent Plants', points: 80, description: 'Glowing vegetation that lights up the alien landscape' },
            { type: 'mineral', name: 'Zero-Point Energy Source', points: 200, description: 'Revolutionary energy source that could change everything' },
            { type: 'artifact', name: 'Star Map', points: 120, description: 'Ancient navigation system showing unknown star systems' }
          ];

          const randomDiscovery = discoveries[Math.floor(Math.random() * discoveries.length)];

          setGameState(prev => {
            const newState = {
              ...prev,
              currentLocation: location,
              energy: prev.energy - 10,
              discoveries: [...prev.discoveries, randomDiscovery],
              score: prev.score + randomDiscovery.points,
              inventory: [...prev.inventory, randomDiscovery.name],
              missionTime: prev.missionTime + 1
            };

            // Check for achievements
            const newAchievements = [...prev.achievements];

            if (newState.discoveries.length === 1 && !newAchievements.includes('first_discovery')) {
              newAchievements.push('first_discovery');
            }
            if (newState.discoveries.length >= 5 && !newAchievements.includes('explorer')) {
              newAchievements.push('explorer');
            }
            if (newState.score >= 500 && !newAchievements.includes('high_scorer')) {
              newAchievements.push('high_scorer');
            }
            if (newState.discoveries.some(d => d.type === 'life') && !newAchievements.includes('xenobiologist')) {
              newAchievements.push('xenobiologist');
            }
            if (newState.discoveries.length >= 10 && !newAchievements.includes('master_explorer')) {
              newAchievements.push('master_explorer');
            }

            // Check if mission is complete
            const missionComplete = newAchievements.length >= 4 || newState.score >= 1000;

            return {
              ...newState,
              achievements: newAchievements,
              missionComplete
            };
          });
        };

        const restAtBase = () => {
          setGameState(prev => ({
            ...prev,
            energy: Math.min(100, prev.energy + 50),
            missionTime: prev.missionTime + 1
          }));
        };

        const completeMission = () => {
          // Award bonus points for completion
          setGameState(prev => ({
            ...prev,
            score: prev.score + 500,
            missionComplete: true
          }));
        };

        const exitGame = () => {
          setGameMode(false);
        };

        // Booking validation
        const validateBookingStep = (step) => {
          switch (step) {
            case 1:
              return booking.travelerName.trim() && booking.email.trim() && booking.email.includes('@');
            case 2:
              return booking.destination !== null;
            case 3:
              return booking.spaceship !== null;
            case 4:
              return booking.departureDate && booking.returnDate &&
                     new Date(booking.departureDate) > new Date() &&
                     new Date(booking.returnDate) > new Date(booking.departureDate);
            case 5:
              return booking.isaId.trim() && booking.emergencyContact.trim();
            case 6:
              return true; // Medical clearance step
            default:
              return true;
          }
        };

        // Generate realistic mission ID
        const generateMissionId = () => {
          const year = new Date().getFullYear();
          const randomCode = Math.random().toString(36).substr(2, 8).toUpperCase();
          return `STP-${year}-${randomCode}`;
        };

        // Calculate mission duration based on destination and ship
        const calculateMissionDuration = () => {
          const distance = booking.destination?.distance || 100;
          const shipSpeed = booking.spaceship?.maxSpeed || 50000;
          const baseDays = Math.ceil(distance / (shipSpeed / 1000)) + 3; // Travel time + 3 days exploration
          return `${baseDays} days`;
        };

        // Submit booking and generate confirmation
        const submitBooking = () => {
          const newMissionId = generateMissionId();
          const bookingConfirmation = {
            ...booking,
            missionId: newMissionId,
            bookingDate: new Date().toISOString(),
            status: 'CONFIRMED',
            launchDate: new Date(Date.now() + 7 * 24 * 60 * 60 * 1000).toISOString(), // 7 days from now
            estimatedDuration: calculateMissionDuration(),
            totalCost: booking.totalCost
          };

          // Store booking in history
          setBookingHistory(prev => [...prev, bookingConfirmation]);
          setMissionId(newMissionId);

          // Store in localStorage for persistence
          const existingBookings = JSON.parse(localStorage.getItem('spaceBookings') || '[]');
          existingBookings.push(bookingConfirmation);
          localStorage.setItem('spaceBookings', JSON.stringify(existingBookings));

          console.log('Booking confirmed:', bookingConfirmation);
        };

        const nextBookingStep = () => {
          if (validateBookingStep(bookingStep)) {
            if (bookingStep === 4) {
              // Calculate total cost when moving from step 4
              const baseCost = booking.destination?.baseCost || 50000;
              const shipMultiplier = booking.spaceship?.costMultiplier || 1.0;
              const total = baseCost * shipMultiplier * booking.passengers;
              setBooking(prev => ({...prev, totalCost: total}));
            }
            if (bookingStep === 6) {
              // Submit booking when moving to confirmation step
              submitBooking();
            }
            setBookingStep(prev => prev + 1);
          } else {
            alert('Please complete all required fields before proceeding.');
          }
        };

        // AI Chatbot Functions
        const sendChatMessage = () => {
          if (!chatInput.trim()) return;

          const userMessage = { sender: 'user', text: chatInput };
          setChatMessages(prev => [...prev, userMessage]);

          // Generate AI response
          setTimeout(() => {
            const aiResponse = generateAIResponse(chatInput);
            setChatMessages(prev => [...prev, { sender: 'ai', text: aiResponse }]);
          }, 1000);

          setChatInput('');
        };

        const generateAIResponse = (input) => {
          const lowerInput = input.toLowerCase();

          // Planet-related queries
          if (lowerInput.includes('planet') || lowerInput.includes('destination')) {
            if (lowerInput.includes('best') || lowerInput.includes('recommend')) {
              return `Based on your preferences, I recommend ${planets[Math.floor(Math.random() * Math.min(3, planets.length))].name}. It offers excellent ${Math.random() > 0.5 ? 'research opportunities' : 'scenic views'} and is ${Math.random() > 0.5 ? 'relatively close' : 'perfect for adventure seekers'}.`;
            }
            if (lowerInput.includes('mars')) {
              return "Mars is a fantastic choice! It's relatively close at about 0.000024 light-years away, has a fascinating geology, and offers great opportunities for surface exploration. The red landscapes are truly breathtaking!";
            }
            if (lowerInput.includes('water') || lowerInput.includes('ocean')) {
              const waterPlanets = planets.filter(p => p.hasWater);
              if (waterPlanets.length > 0) {
                return `Great question! We have ${waterPlanets.length} destinations with water features, including ${waterPlanets[0].name}. These planets offer unique underwater exploration and aquatic activities.`;
              }
            }
            return `We have ${planets.length} amazing destinations! Each offers unique experiences from alien landscapes to research opportunities. Would you like recommendations based on distance, activities, or planet type?`;
          }

          // Spaceship-related queries
          if (lowerInput.includes('ship') || lowerInput.includes('spacecraft') || lowerInput.includes('vessel')) {
            if (lowerInput.includes('fastest')) {
              const fastestShip = spaceshipsData.reduce((prev, current) =>
                (prev.maxSpeed > current.maxSpeed) ? prev : current
              );
              return `The fastest ship in our fleet is the ${fastestShip.name} with a top speed of ${fastestShip.speed}. It's perfect for long-distance travel and features ${fastestShip.amenities?.[0] || 'advanced technology'}.`;
            }
            if (lowerInput.includes('luxury') || lowerInput.includes('comfortable')) {
              const luxuryShips = spaceshipsData.filter(s => s.luxuryLevel >= 4);
              if (luxuryShips.length > 0) {
                return `For luxury travel, I recommend the ${luxuryShips[0].name}. It features ${luxuryShips[0].amenities?.join(', ') || 'premium amenities'} and has a comfort rating of ${luxuryShips[0].comfortLevel}/10.`;
              }
            }
            return `Our fleet includes ${spaceshipsData.length} advanced spacecraft, from efficient research vessels to luxury cruise ships. Each is designed for specific mission types. What kind of journey are you planning?`;
          }

          // Travel and booking queries
          if (lowerInput.includes('cost') || lowerInput.includes('price') || lowerInput.includes('expensive')) {
            return "Travel costs vary by destination and spacecraft choice. Nearby planets start around 25,000 GC, while exotic exoplanets can cost 100,000+ GC. Luxury ships and longer journeys increase the price. Would you like a quote for a specific destination?";
          }

          if (lowerInput.includes('time') || lowerInput.includes('long') || lowerInput.includes('duration')) {
            return "Travel times depend on distance and ship speed. Nearby destinations take days to weeks, while distant exoplanets can take months or years. Our fastest ships can significantly reduce travel time. Use the travel calculator on planet detail pages for specific estimates!";
          }

          if (lowerInput.includes('safe') || lowerInput.includes('danger') || lowerInput.includes('risk')) {
            return "Safety is our top priority! All destinations are classified by risk level. Green zones are perfectly safe, yellow zones require standard precautions, and red zones are for experienced adventurers only. Our ships have advanced safety systems and emergency protocols.";
          }

          // General greetings and help
          if (lowerInput.includes('hello') || lowerInput.includes('hi') || lowerInput.includes('hey')) {
            return "Hello, space traveler! I'm ARIA, your AI assistant. I can help you explore our galaxy map, choose destinations, select spacecraft, and plan your perfect space adventure. What would you like to know?";
          }

          if (lowerInput.includes('help') || lowerInput.includes('what can you')) {
            return "I can assist you with: ðŸŒ Planet information and recommendations, ðŸš€ Spaceship details and comparisons, ðŸ’° Cost estimates and travel planning, ðŸ—ºï¸ Navigation through our galaxy map, ðŸ“‹ Booking assistance and mission planning. Just ask me anything!";
          }

          // Default responses
          const defaultResponses = [
            "That's an interesting question! Could you be more specific about what you'd like to know about space travel?",
            "I'm here to help with your space tourism needs. Try asking about planets, spaceships, or travel planning!",
            "Great question! I can provide information about destinations, spacecraft, costs, and travel times. What interests you most?",
            "I'd love to help you plan the perfect space adventure! What aspect of space travel would you like to explore?"
          ];

          return defaultResponses[Math.floor(Math.random() * defaultResponses.length)];
        };

        return (
          <div className="min-h-screen cosmic-bg">
            {/* Navigation */}
            <nav className="fixed top-0 left-0 right-0 z-50 bg-gray-900 bg-opacity-95 backdrop-blur-lg border-b border-blue-500 border-opacity-20">
              <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                <div className="flex items-center justify-between h-16">
                  <div className="flex items-center space-x-3">
                    <div className="w-10 h-10 bg-gradient-to-r from-blue-400 to-purple-500 rounded-full flex items-center justify-center">
                      <span className="text-white text-xl">ðŸš€</span>
                    </div>
                    <div>
                      <h1 className="text-xl font-bold text-white" style={{fontFamily: 'Orbitron, monospace'}}>
                        Space Tourism Portal
                      </h1>
                      <p className="text-xs text-blue-400">2090</p>
                    </div>
                  </div>
                  <div className="hidden md:flex items-center space-x-8">
                    <button
                      onClick={() => setCurrentPage('home')}
                      className={`transition-colors ${currentPage === 'home' ? 'text-blue-400' : 'text-gray-300 hover:text-blue-400'}`}
                    >
                      Home
                    </button>
                    <button
                      onClick={() => setCurrentPage('destinations')}
                      className={`transition-colors ${currentPage === 'destinations' ? 'text-blue-400' : 'text-gray-300 hover:text-blue-400'}`}
                    >
                      Destinations
                    </button>
                    <button
                      onClick={() => setCurrentPage('spaceships')}
                      className={`transition-colors ${currentPage === 'spaceships' ? 'text-blue-400' : 'text-gray-300 hover:text-blue-400'}`}
                    >
                      Spaceships
                    </button>
                    <button
                      onClick={() => setCurrentPage('galaxy-map')}
                      className={`transition-colors ${currentPage === 'galaxy-map' ? 'text-blue-400' : 'text-gray-300 hover:text-blue-400'}`}
                    >
                      Galaxy Map
                    </button>
                    <button
                      onClick={() => setCurrentPage('missions')}
                      className={`transition-colors ${currentPage === 'missions' ? 'text-blue-400' : 'text-gray-300 hover:text-blue-400'}`}
                    >
                      Missions
                    </button>
                    <button
                      onClick={() => setCurrentPage('booking')}
                      className={`transition-colors ${currentPage === 'booking' ? 'text-blue-400' : 'text-gray-300 hover:text-blue-400'}`}
                    >
                      Booking
                    </button>
                    <button
                      onClick={() => setCurrentPage('my-bookings')}
                      className={`transition-colors ${currentPage === 'my-bookings' ? 'text-blue-400' : 'text-gray-300 hover:text-blue-400'}`}
                    >
                      My Bookings
                    </button>
                  </div>
                </div>
              </div>
            </nav>

            <main className="pt-16">
              {/* Home Page */}
              {currentPage === 'home' && (
                <section className="relative overflow-hidden">
                  <div className="relative max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-20">
                    <div className="text-center">
                      <h1 className="text-5xl md:text-7xl font-bold text-white mb-6" style={{fontFamily: 'Orbitron, monospace'}}>
                        Explore the
                        <span className="block text-transparent bg-clip-text bg-gradient-to-r from-blue-400 via-purple-500 to-pink-500">
                          Galaxy
                        </span>
                      </h1>

                      <p className="text-xl md:text-2xl text-gray-300 mb-8 max-w-3xl mx-auto">
                        Book your interplanetary vacation to over 100 real and fictional planets.
                        Experience the future of space tourism in 2090.
                      </p>

                      <div className="flex flex-col sm:flex-row gap-4 justify-center items-center">
                        <button
                          onClick={() => setCurrentPage('destinations')}
                          className="px-8 py-4 bg-gradient-to-r from-blue-500 to-purple-600 text-white font-bold rounded-lg hover:from-purple-600 hover:to-pink-500 transition-all duration-300 neon-glow"
                        >
                          Start Exploring â†’
                        </button>

                        <button
                          onClick={() => setCurrentPage('galaxy-map')}
                          className="px-8 py-4 border-2 border-blue-500 text-blue-400 font-bold rounded-lg hover:bg-blue-500 hover:text-white transition-all duration-300"
                        >
                          â–¶ View Galaxy Map
                        </button>
                      </div>
                    </div>
                  </div>
                </section>
              )}

              {/* Destinations Page */}
              {currentPage === 'destinations' && (
                <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
                  <div className="text-center mb-12">
                    <h1 className="text-4xl md:text-6xl font-bold text-white mb-4" style={{fontFamily: 'Orbitron, monospace'}}>
                      Galactic
                      <span className="block text-transparent bg-clip-text bg-gradient-to-r from-blue-400 to-purple-500">
                        Destinations
                      </span>
                    </h1>
                    <p className="text-xl text-gray-300 max-w-2xl mx-auto">
                      Explore {planets.length}+ destinations including real NASA exoplanets and fictional worlds.
                    </p>
                  </div>

                  {/* Enhanced Search and Filters */}
                  <div className="mb-8 space-y-6">
                    {/* Search Bar */}
                    <div className="relative">
                      <span className="absolute left-4 top-1/2 transform -translate-y-1/2 text-gray-400 text-xl">ðŸ”</span>
                      <input
                        type="text"
                        placeholder="Search planets, destinations, or features..."
                        value={searchTerm}
                        onChange={(e) => setSearchTerm(e.target.value)}
                        className="w-full pl-12 pr-4 py-4 bg-white bg-opacity-10 backdrop-blur-lg border border-gray-600 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:border-blue-500 focus:ring-2 focus:ring-blue-500 focus:ring-opacity-20 transition-all duration-300"
                      />
                    </div>

                    {/* Filter Controls */}
                    <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4">
                      {/* Planet Type Filter */}
                      <div>
                        <label className="block text-sm font-medium text-gray-300 mb-2">Planet Type</label>
                        <select
                          value={filters.type}
                          onChange={(e) => setFilters({...filters, type: e.target.value})}
                          className="w-full px-3 py-2 bg-white bg-opacity-10 border border-gray-600 rounded-lg text-white focus:outline-none focus:border-blue-500"
                        >
                          <option value="all" className="bg-gray-800">All Types</option>
                          <option value="exoplanet" className="bg-gray-800">NASA Exoplanets</option>
                          <option value="planet" className="bg-gray-800">Solar System</option>
                          <option value="moon" className="bg-gray-800">Moons</option>
                          <option value="fictional" className="bg-gray-800">Fictional Worlds</option>
                        </select>
                      </div>

                      {/* Distance Filter */}
                      <div>
                        <label className="block text-sm font-medium text-gray-300 mb-2">Max Distance: {filters.maxDistance} ly</label>
                        <input
                          type="range"
                          min="0"
                          max="2000"
                          value={filters.maxDistance}
                          onChange={(e) => setFilters({...filters, maxDistance: parseInt(e.target.value)})}
                          className="w-full h-2 bg-gray-600 rounded-lg appearance-none cursor-pointer"
                        />
                      </div>

                      {/* Cost Filter */}
                      <div>
                        <label className="block text-sm font-medium text-gray-300 mb-2">Max Cost: {filters.maxCost.toLocaleString()} GC</label>
                        <input
                          type="range"
                          min="10000"
                          max="500000"
                          step="10000"
                          value={filters.maxCost}
                          onChange={(e) => setFilters({...filters, maxCost: parseInt(e.target.value)})}
                          className="w-full h-2 bg-gray-600 rounded-lg appearance-none cursor-pointer"
                        />
                      </div>

                      {/* Feature Toggles */}
                      <div className="space-y-2">
                        <label className="flex items-center space-x-2 text-sm text-gray-300">
                          <input
                            type="checkbox"
                            checked={filters.hasWater}
                            onChange={(e) => setFilters({...filters, hasWater: e.target.checked})}
                            className="rounded"
                          />
                          <span>ðŸ’§ Has Water</span>
                        </label>
                        <label className="flex items-center space-x-2 text-sm text-gray-300">
                          <input
                            type="checkbox"
                            checked={filters.habitable}
                            onChange={(e) => setFilters({...filters, habitable: e.target.checked})}
                            className="rounded"
                          />
                          <span>ðŸŒ± Habitable</span>
                        </label>
                      </div>
                    </div>

                    {/* Results Summary */}
                    <div className="flex items-center justify-between text-gray-400 text-sm">
                      <span>
                        Showing {filteredPlanets.length} of {planets.length} destinations
                        {searchTerm && ` for "${searchTerm}"`}
                      </span>
                      <button
                        onClick={() => {
                          setSearchTerm('');
                          setFilters({hasWater: false, habitable: false, type: 'all', maxDistance: 1000, maxCost: 200000});
                        }}
                        className="px-3 py-1 bg-blue-500 bg-opacity-20 text-blue-400 rounded hover:bg-opacity-30 transition-all"
                      >
                        Clear Filters
                      </button>
                    </div>
                  </div>

                  {/* Loading State */}
                  {loading && (
                    <div className="text-center py-12">
                      <div className="inline-block animate-spin rounded-full h-12 w-12 border-b-2 border-blue-400 mb-4"></div>
                      <h3 className="text-xl font-bold text-white mb-2">Loading NASA Exoplanets...</h3>
                      <p className="text-gray-400">Fetching real data from NASA's Exoplanet Archive</p>
                    </div>
                  )}

                  {/* Planets Grid */}
                  {!loading && (
                    <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
                      {filteredPlanets.map((planet) => (
                      <div
                        key={planet.id}
                        className="group relative overflow-hidden rounded-lg bg-white bg-opacity-5 backdrop-blur-lg border border-gray-600 hover:border-blue-500 hover:border-opacity-50 transition-all duration-300 cursor-pointer"
                        onClick={() => {
                          setSelectedPlanet(planet);
                          setCurrentPage('planet-details');
                        }}
                      >
                        {/* Planet Image or Icon */}
                        <div className="aspect-w-16 aspect-h-9 bg-gradient-to-br from-blue-500 from-opacity-20 to-purple-500 to-opacity-20 relative overflow-hidden">
                          <div className="flex w-full h-48 items-center justify-center relative">
                            {planet.image ? (
                              <img
                                src={planet.image}
                                alt={planet.name}
                                className="w-full h-full object-cover rounded-lg"
                                onError={(e) => {
                                  e.target.style.display = 'none';
                                  e.target.nextSibling.style.display = 'block';
                                }}
                              />
                            ) : null}
                            <span
                              className="text-6xl"
                              style={{ display: planet.image ? 'none' : 'block' }}
                            >
                              {planet.type === 'exoplanet' ? 'ðŸª' : planet.type === 'fictional' ? 'ðŸŒŒ' : 'ðŸŒ'}
                            </span>
                          </div>

                          {/* Planet Type Badge */}
                          <div className="absolute top-2 right-2">
                            <span className={`text-xs px-2 py-1 rounded-full ${
                              planet.type === 'exoplanet'
                                ? 'bg-green-500 bg-opacity-20 text-green-400 border border-green-500 border-opacity-50'
                                : planet.type === 'fictional'
                                ? 'bg-purple-500 bg-opacity-20 text-purple-400 border border-purple-500 border-opacity-50'
                                : 'bg-blue-500 bg-opacity-20 text-blue-400 border border-blue-500 border-opacity-50'
                            }`}>
                              {planet.type === 'exoplanet' ? 'ðŸ”¬ NASA' : planet.type === 'fictional' ? 'ðŸŽ¬ Fictional' : 'ðŸŒ Real'}
                            </span>
                          </div>
                        </div>

                        <div className="p-6">
                          <div className="flex items-start justify-between mb-3">
                            <h3 className="text-xl font-bold text-white group-hover:text-blue-400 transition-colors duration-300">
                              {planet.name}
                            </h3>
                            {planet.hasWater && <span className="text-blue-400 text-lg">ðŸ’§</span>}
                            {planet.habitable && <span className="text-green-400 text-lg">ðŸŒ±</span>}
                          </div>

                          <p className="text-gray-300 mb-4 line-clamp-2">
                            {planet.description}
                          </p>

                          {/* Planet Stats */}
                          <div className="grid grid-cols-2 gap-2 mb-4 text-xs">
                            <div className="bg-white bg-opacity-5 rounded p-2">
                              <span className="text-gray-400">Gravity:</span>
                              <span className="text-white ml-1">{planet.gravity}</span>
                            </div>
                            <div className="bg-white bg-opacity-5 rounded p-2">
                              <span className="text-gray-400">Temp:</span>
                              <span className="text-white ml-1">{planet.temperature}</span>
                            </div>
                          </div>

                          {planet.tags && planet.tags.length > 0 && (
                            <div className="flex flex-wrap gap-2 mb-4">
                              {planet.tags.slice(0, 3).map((tag, tagIndex) => (
                                <div key={tagIndex} className="flex items-center space-x-1 text-xs px-2 py-1 bg-white bg-opacity-10 rounded-full">
                                  <span className="text-gray-300">{tag}</span>
                                </div>
                              ))}
                              {planet.tags.length > 3 && (
                                <div className="text-xs px-2 py-1 bg-white bg-opacity-10 rounded-full text-gray-400">
                                  +{planet.tags.length - 3} more
                                </div>
                              )}
                            </div>
                          )}

                          <div className="flex items-center justify-between mb-4">
                            <div className="flex items-center space-x-1 text-sm text-gray-400">
                              <span>ðŸ“</span>
                              <span>{planet.distance < 1 ? (planet.distance * 1000).toFixed(0) + ' AU' : planet.distance.toFixed(1) + ' ly'}</span>
                            </div>
                            <div className="text-green-400 font-bold">
                              {planet.baseCost?.toLocaleString()} GC
                            </div>
                          </div>

                          {/* Discovery Info for NASA planets */}
                          {planet.type === 'exoplanet' && planet.discoveryYear && (
                            <div className="text-xs text-green-400 mb-3">
                              ðŸ”¬ Discovered: {planet.discoveryYear}
                            </div>
                          )}

                          <button className="block w-full text-center px-4 py-3 bg-gradient-to-r from-blue-500 to-purple-600 text-white font-medium rounded-lg hover:from-purple-600 hover:to-pink-500 transition-all duration-300 group-hover:neon-glow">
                            Explore Planet
                          </button>
                        </div>
                      </div>
                    ))}

                    {/* No Results Message */}
                    {filteredPlanets.length === 0 && !loading && (
                      <div className="col-span-full text-center py-12">
                        <span className="text-6xl mb-4 block">ðŸ”</span>
                        <h3 className="text-xl font-bold text-white mb-2">No destinations found</h3>
                        <p className="text-gray-400 mb-4">Try adjusting your search or filters</p>
                        <button
                          onClick={() => {
                            setSearchTerm('');
                            setFilters({hasWater: false, habitable: false, type: 'all', maxDistance: 1000, maxCost: 200000});
                          }}
                          className="px-6 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors"
                        >
                          Clear All Filters
                        </button>
                      </div>
                    )}
                  </div>
                )}
              </div>
            )}

            {/* Spaceships Page */}
            {currentPage === 'spaceships' && (
              <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
                <div className="text-center mb-12">
                  <h1 className="text-4xl md:text-6xl font-bold text-white mb-4" style={{fontFamily: 'Orbitron, monospace'}}>
                    Starship
                    <span className="block text-transparent bg-clip-text bg-gradient-to-r from-blue-400 to-purple-500">
                      Fleet
                    </span>
                  </h1>
                  <p className="text-xl text-gray-300 max-w-2xl mx-auto">
                    Choose from our advanced fleet of {spaceshipsData.length} spacecraft, each designed for different types of interstellar travel.
                  </p>
                </div>

                {/* Spaceships Grid */}
                <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
                  {spaceshipsData.map((ship) => (
                    <div
                      key={ship.id}
                      className="group relative overflow-hidden rounded-lg bg-white bg-opacity-5 backdrop-blur-lg border border-gray-600 hover:border-blue-500 hover:border-opacity-50 transition-all duration-300 cursor-pointer"
                      onClick={() => {
                        setSelectedSpaceship(ship);
                        setCurrentPage('ship-details');
                      }}
                    >
                      {/* Ship Image/Icon */}
                      <div className="aspect-w-16 aspect-h-9 bg-gradient-to-br from-blue-500 from-opacity-20 to-purple-500 to-opacity-20 relative overflow-hidden">
                        <div className="flex w-full h-48 items-center justify-center relative">
                          {ship.image ? (
                            <img
                              src={ship.image}
                              alt={ship.name}
                              className="w-full h-full object-cover rounded-lg"
                              onError={(e) => {
                                e.target.style.display = 'none';
                                e.target.nextElementSibling.style.display = 'flex';
                              }}
                            />
                          ) : null}
                          <div className="flex w-full h-full items-center justify-center" style={{display: ship.image ? 'none' : 'flex'}}>
                            <span className="text-6xl">{ship.emoji}</span>
                          </div>
                        </div>

                        {/* Luxury Level Badge */}
                        <div className="absolute top-2 right-2">
                          <div className="flex items-center space-x-1 text-xs px-2 py-1 bg-yellow-500 bg-opacity-20 text-yellow-400 border border-yellow-500 border-opacity-50 rounded-full">
                            <span>â­</span>
                            <span>{ship.luxuryLevel}/5</span>
                          </div>
                        </div>

                        {/* Range Badge */}
                        <div className="absolute top-2 left-2">
                          <span className={`text-xs px-2 py-1 rounded-full ${
                            ship.range === 'Interstellar' || ship.range === 'Galactic'
                              ? 'bg-purple-500 bg-opacity-20 text-purple-400 border border-purple-500 border-opacity-50'
                              : ship.range === 'Deep Space'
                              ? 'bg-blue-500 bg-opacity-20 text-blue-400 border border-blue-500 border-opacity-50'
                              : 'bg-green-500 bg-opacity-20 text-green-400 border border-green-500 border-opacity-50'
                          }`}>
                            {ship.range}
                          </span>
                        </div>
                      </div>

                      <div className="p-6">
                        <div className="flex items-start justify-between mb-3">
                          <h3 className="text-xl font-bold text-white group-hover:text-blue-400 transition-colors duration-300">
                            {ship.name}
                          </h3>
                        </div>

                        <p className="text-gray-300 mb-4 line-clamp-2">
                          {ship.description}
                        </p>

                        {/* Ship Stats */}
                        <div className="grid grid-cols-2 gap-2 mb-4 text-xs">
                          <div className="bg-white bg-opacity-5 rounded p-2">
                            <span className="text-gray-400">Speed:</span>
                            <span className="text-white ml-1">{ship.speed}</span>
                          </div>
                          <div className="bg-white bg-opacity-5 rounded p-2">
                            <span className="text-gray-400">Capacity:</span>
                            <span className="text-white ml-1">{ship.capacity}</span>
                          </div>
                          <div className="bg-white bg-opacity-5 rounded p-2">
                            <span className="text-gray-400">Safety:</span>
                            <span className="text-white ml-1">{ship.safetyRating}/10</span>
                          </div>
                          <div className="bg-white bg-opacity-5 rounded p-2">
                            <span className="text-gray-400">Comfort:</span>
                            <span className="text-white ml-1">{ship.comfortLevel}/10</span>
                          </div>
                        </div>

                        {/* Amenities */}
                        <div className="flex flex-wrap gap-1 mb-4">
                          {ship.amenities.slice(0, 3).map((amenity, index) => (
                            <span key={index} className="text-xs px-2 py-1 bg-white bg-opacity-10 rounded-full text-gray-300">
                              {amenity}
                            </span>
                          ))}
                          {ship.amenities.length > 3 && (
                            <span className="text-xs px-2 py-1 bg-white bg-opacity-10 rounded-full text-gray-400">
                              +{ship.amenities.length - 3}
                            </span>
                          )}
                        </div>

                        <div className="flex items-center justify-between mb-4">
                          <div className="text-sm text-gray-400">
                            <span>{ship.manufacturer}</span>
                          </div>
                          <div className="text-green-400 font-bold">
                            {ship.costMultiplier}x cost
                          </div>
                        </div>

                        <button className="block w-full text-center px-4 py-3 bg-gradient-to-r from-blue-500 to-purple-600 text-white font-medium rounded-lg hover:from-purple-600 hover:to-pink-500 transition-all duration-300 group-hover:neon-glow">
                          Select Spacecraft
                        </button>
                      </div>
                    </div>
                  ))}
                </div>
              </div>
            )}

              {/* Planet Details Page */}
              {currentPage === 'planet-details' && selectedPlanet && (
                <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
                  {/* Initialize 3D Planet Viewer */}
                  {React.useEffect(() => {
                    if (currentPage === 'planet-details' && selectedPlanet) {
                      window.currentSelectedPlanet = selectedPlanet;
                      const timer = setTimeout(() => {
                        if (window.initializePlanetViewer) {
                          window.initializePlanetViewer(selectedPlanet);
                        }
                      }, 100);
                      return () => clearTimeout(timer);
                    }
                  }, [currentPage, selectedPlanet])}
                  <button
                    onClick={() => setCurrentPage('destinations')}
                    className="mb-6 flex items-center space-x-2 text-blue-400 hover:text-blue-300 transition-colors"
                  >
                    <span>â†</span>
                    <span>Back to Destinations</span>
                  </button>

                  <div className="grid grid-cols-1 lg:grid-cols-2 gap-12 items-start">
                    <div>
                      {/* 3D Planet Viewer */}
                      <div className="relative">
                        <div className="aspect-square bg-black rounded-lg overflow-hidden border border-blue-500/30 relative">
                          <canvas id="planet-canvas" className="w-full h-full"></canvas>

                          {/* Planet Controls */}
                          <div className="absolute top-4 right-4 space-y-2">
                            <button
                              id="planet-rotate-toggle"
                              className="px-3 py-2 bg-black/60 backdrop-blur-lg rounded-lg text-white text-sm hover:bg-black/80 transition-colors"
                              onClick={() => window.togglePlanetRotation && window.togglePlanetRotation()}
                            >
                              â¸ï¸ Pause
                            </button>
                            <button
                              id="planet-reset-view"
                              className="px-3 py-2 bg-black/60 backdrop-blur-lg rounded-lg text-white text-sm hover:bg-black/80 transition-colors"
                              onClick={() => window.resetPlanetView && window.resetPlanetView()}
                            >
                              ðŸ”„ Reset
                            </button>
                          </div>

                          {/* Planet Info Overlay */}
                          <div className="absolute bottom-4 left-4 bg-black/80 backdrop-blur-lg rounded-lg p-3 text-white max-w-xs">
                            <h4 className="font-bold mb-1">{selectedPlanet.name}</h4>
                            <p className="text-xs text-gray-300">Click and drag to rotate â€¢ Scroll to zoom</p>
                          </div>
                        </div>

                        {/* Travel Time Simulator */}
                        <div className="mt-6 bg-white/5 backdrop-blur-lg rounded-lg p-6 border border-gray-600">
                          <h4 className="text-lg font-bold text-white mb-4">ðŸš€ Travel Time Calculator</h4>

                          <div className="space-y-4">
                            <div>
                              <label className="block text-sm text-gray-300 mb-2">Travel Speed</label>
                              <input
                                type="range"
                                id="speed-slider"
                                min="1000"
                                max="100000"
                                defaultValue="50000"
                                className="w-full h-2 bg-gray-700 rounded-lg appearance-none cursor-pointer"
                                onChange={(e) => window.updateTravelTime && window.updateTravelTime(e.target.value)}
                              />
                              <div className="flex justify-between text-xs text-gray-400 mt-1">
                                <span>Standard</span>
                                <span>Warp Speed</span>
                              </div>
                            </div>

                            <div className="grid grid-cols-2 gap-4 text-center">
                              <div className="bg-black/30 rounded-lg p-3">
                                <div id="travel-speed" className="text-lg font-bold text-blue-400">50,000 km/h</div>
                                <div className="text-xs text-gray-400">Current Speed</div>
                              </div>
                              <div className="bg-black/30 rounded-lg p-3">
                                <div id="travel-time" className="text-lg font-bold text-green-400">
                                  {Math.ceil((selectedPlanet.distance || 100) / 50 * 365)} days
                                </div>
                                <div className="text-xs text-gray-400">Travel Time</div>
                              </div>
                            </div>
                          </div>
                        </div>
                      </div>

                      <div className="grid grid-cols-2 gap-4">
                        <div className="p-4 bg-white bg-opacity-5 rounded-lg">
                          <h4 className="text-sm text-gray-400 mb-1">Distance</h4>
                          <p className="text-white font-bold">{selectedPlanet.distance?.toFixed(1)} ly</p>
                        </div>
                        <div className="p-4 bg-white bg-opacity-5 rounded-lg">
                          <h4 className="text-sm text-gray-400 mb-1">Gravity</h4>
                          <p className="text-white font-bold">{selectedPlanet.gravity}</p>
                        </div>
                        <div className="p-4 bg-white bg-opacity-5 rounded-lg">
                          <h4 className="text-sm text-gray-400 mb-1">Temperature</h4>
                          <p className="text-white font-bold">{selectedPlanet.temperature}</p>
                        </div>
                        <div className="p-4 bg-white bg-opacity-5 rounded-lg">
                          <h4 className="text-sm text-gray-400 mb-1">Cost</h4>
                          <p className="text-green-400 font-bold">{selectedPlanet.baseCost?.toLocaleString()} GC</p>
                        </div>
                      </div>
                    </div>

                    <div>
                      <h1 className="text-4xl font-bold text-white mb-4" style={{fontFamily: 'Orbitron, monospace'}}>
                        {selectedPlanet.name}
                      </h1>

                      <div className="flex flex-wrap gap-2 mb-6">
                        {selectedPlanet.tags?.map((tag, index) => (
                          <span key={index} className="px-3 py-1 bg-blue-500 bg-opacity-20 text-blue-400 rounded-full text-sm">
                            {tag}
                          </span>
                        ))}
                      </div>

                      <p className="text-xl text-gray-300 mb-8">
                        {selectedPlanet.description}
                      </p>

                      <div className="mb-8">
                        <h3 className="text-xl font-bold text-white mb-4">Atmosphere & Environment</h3>
                        <div className="grid grid-cols-1 gap-4">
                          <div className="p-4 bg-white bg-opacity-5 rounded-lg">
                            <h4 className="text-sm text-gray-400 mb-1">Atmosphere</h4>
                            <p className="text-white">{selectedPlanet.atmosphere}</p>
                          </div>
                          <div className="p-4 bg-white bg-opacity-5 rounded-lg">
                            <h4 className="text-sm text-gray-400 mb-1">Population</h4>
                            <p className="text-white">{selectedPlanet.population}</p>
                          </div>
                        </div>
                      </div>

                      {/* Travel Packages & Activities */}
                      <div className="mb-8">
                        <h3 className="text-xl font-bold text-white mb-4">ðŸŽ¯ Available Experiences</h3>
                        <div className="grid grid-cols-1 sm:grid-cols-2 gap-4">
                          {(() => {
                            // Generate dynamic activities based on planet type and characteristics
                            const activities = [];

                            if (selectedPlanet.type === 'exoplanet') {
                              activities.push(
                                { name: 'Exoplanet Research Mission', icon: 'ðŸ”¬', price: 25000, duration: '7 days' },
                                { name: 'Alien Landscape Photography', icon: 'ðŸ“¸', price: 15000, duration: '3 days' }
                              );
                            }

                            if (selectedPlanet.hasWater) {
                              activities.push(
                                { name: 'Underwater Exploration', icon: 'ðŸ¤¿', price: 30000, duration: '5 days' },
                                { name: 'Alien Ocean Cruise', icon: 'ðŸš¢', price: 20000, duration: '4 days' }
                              );
                            }

                            if (selectedPlanet.atmosphere && selectedPlanet.atmosphere !== 'None') {
                              activities.push(
                                { name: 'Atmospheric Skydiving', icon: 'ðŸª‚', price: 35000, duration: '2 days' },
                                { name: 'Weather Phenomenon Tour', icon: 'â›ˆï¸', price: 18000, duration: '3 days' }
                              );
                            }

                            if (selectedPlanet.gravity && selectedPlanet.gravity.includes('low')) {
                              activities.push(
                                { name: 'Low-Gravity Sports', icon: 'ðŸ€', price: 12000, duration: '2 days' },
                                { name: 'Zero-G Dance Experience', icon: 'ðŸ’ƒ', price: 8000, duration: '1 day' }
                              );
                            }

                            // Default activities for all planets
                            activities.push(
                              { name: 'Surface Exploration Trek', icon: 'ðŸ¥¾', price: 22000, duration: '4 days' },
                              { name: 'Orbital Viewing Experience', icon: 'ðŸ›°ï¸', price: 16000, duration: '2 days' },
                              { name: 'Geological Survey Mission', icon: 'â›ï¸', price: 28000, duration: '6 days' }
                            );

                            return activities.slice(0, 4).map((activity, index) => (
                              <div key={index} className="bg-white/5 backdrop-blur-lg rounded-lg p-4 border border-gray-600 hover:border-blue-500/50 transition-all duration-300 cursor-pointer group">
                                <div className="flex items-center justify-between mb-2">
                                  <div className="flex items-center space-x-2">
                                    <span className="text-2xl">{activity.icon}</span>
                                    <h4 className="font-semibold text-white group-hover:text-blue-400 transition-colors">{activity.name}</h4>
                                  </div>
                                  <span className="text-green-400 font-bold">{activity.price.toLocaleString()} GC</span>
                                </div>
                                <div className="text-sm text-gray-400">Duration: {activity.duration}</div>
                                <button className="mt-2 w-full py-2 bg-blue-500/20 text-blue-400 rounded-lg hover:bg-blue-500/30 transition-colors text-sm">
                                  Add to Package
                                </button>
                              </div>
                            ));
                          })()}
                        </div>
                      </div>

                      {/* Planet Weather & Conditions */}
                      <div className="mb-8">
                        <h3 className="text-xl font-bold text-white mb-4">ðŸŒ¤ï¸ Current Conditions</h3>
                        <div className="bg-white/5 backdrop-blur-lg rounded-lg p-4 border border-gray-600">
                          <div className="grid grid-cols-2 gap-4 text-sm">
                            <div>
                              <span className="text-gray-400">Weather:</span>
                              <span className="text-white ml-2">
                                {selectedPlanet.type === 'exoplanet' ? 'Alien Storm Systems' :
                                 selectedPlanet.hasWater ? 'Humid with Cloud Cover' : 'Clear Skies'}
                              </span>
                            </div>
                            <div>
                              <span className="text-gray-400">Radiation:</span>
                              <span className="text-white ml-2">
                                {selectedPlanet.distance > 100 ? 'High' : selectedPlanet.distance > 50 ? 'Moderate' : 'Low'}
                              </span>
                            </div>
                            <div>
                              <span className="text-gray-400">Visibility:</span>
                              <span className="text-white ml-2">
                                {selectedPlanet.atmosphere === 'None' ? 'Perfect' : 'Variable'}
                              </span>
                            </div>
                            <div>
                              <span className="text-gray-400">Safety Level:</span>
                              <span className={`ml-2 font-semibold ${selectedPlanet.distance < 50 ? 'text-green-400' : selectedPlanet.distance < 100 ? 'text-yellow-400' : 'text-red-400'}`}>
                                {selectedPlanet.distance < 50 ? 'Safe' : selectedPlanet.distance < 100 ? 'Caution' : 'High Risk'}
                              </span>
                            </div>
                          </div>
                        </div>
                      </div>

                      <div className="flex flex-col sm:flex-row gap-4">
                        <button
                          onClick={() => {
                            setBooking(prev => ({...prev, destination: selectedPlanet}));
                            setCurrentPage('booking');
                          }}
                          className="flex-1 px-6 py-4 bg-gradient-to-r from-blue-500 to-purple-600 text-white font-bold rounded-lg hover:from-purple-600 hover:to-pink-500 transition-all duration-300 neon-glow"
                        >
                          ðŸš€ Book This Planet
                        </button>
                        <button
                          className="px-6 py-4 border-2 border-blue-500 text-blue-400 font-bold rounded-lg hover:bg-blue-500 hover:text-white transition-all duration-300"
                        >
                          â­ Add to Favorites
                        </button>
                      </div>
                    </div>
                  </div>
                </div>
              )}

              {/* Galaxy Map Page - Enhanced 3D */}
              {currentPage === 'galaxy-map' && (
                <div className="max-w-full mx-auto px-4 sm:px-6 lg:px-8 py-8">
                  <div className="text-center mb-8">
                    <h1 className="text-4xl md:text-6xl font-bold text-white mb-4" style={{fontFamily: 'Orbitron, monospace'}}>
                      Galaxy
                      <span className="block text-transparent bg-clip-text bg-gradient-to-r from-blue-400 to-purple-500">
                        Map
                      </span>
                    </h1>
                    <p className="text-xl text-gray-300 max-w-2xl mx-auto mb-4">
                      Navigate the galaxy in full 3D. Click and drag to explore, scroll to zoom.
                    </p>

                    {/* 3D Controls Info */}
                    <div className="flex justify-center space-x-6 text-sm text-gray-400 mb-6">
                      <div className="flex items-center space-x-2">
                        <span>ðŸ–±ï¸</span>
                        <span>Drag to rotate</span>
                      </div>
                      <div className="flex items-center space-x-2">
                        <span>ðŸ”</span>
                        <span>Scroll to zoom</span>
                      </div>
                      <div className="flex items-center space-x-2">
                        <span>ðŸŒ</span>
                        <span>Click planets to explore</span>
                      </div>
                    </div>
                  </div>

                  {/* 3D Galaxy Map Container */}
                  <div className="relative w-full h-screen bg-black rounded-lg overflow-hidden border border-blue-500/30">
                    <canvas id="galaxy-canvas" className="w-full h-full"></canvas>

                    {/* Planet Info Panel */}
                    <div id="planet-info-panel" className="absolute top-4 left-4 bg-black/80 backdrop-blur-lg rounded-lg p-4 text-white max-w-sm opacity-0 transition-all duration-300 pointer-events-none">
                      <h3 id="planet-info-name" className="text-lg font-bold mb-2"></h3>
                      <div id="planet-info-details" className="space-y-1 text-sm text-gray-300"></div>
                      <button
                        id="planet-info-explore"
                        className="mt-3 px-4 py-2 bg-blue-500 hover:bg-blue-600 rounded-lg text-sm font-semibold transition-colors"
                        onClick={() => {
                          const planetData = window.currentHoveredPlanet;
                          if (planetData && window.setSelectedPlanet && window.setCurrentPage) {
                            window.setSelectedPlanet(planetData);
                            window.setCurrentPage('planet-details');
                          }
                        }}
                      >
                        Explore Planet
                      </button>
                    </div>

                    {/* Navigation Help */}
                    <div className="absolute bottom-4 right-4 bg-black/60 backdrop-blur-lg rounded-lg p-3 text-white text-xs">
                      <div className="space-y-1">
                        <div>ðŸ–±ï¸ Left click + drag: Rotate view</div>
                        <div>ðŸ” Mouse wheel: Zoom in/out</div>
                        <div>ðŸŒ Click planet: View details</div>
                        <div>âŒ¨ï¸ R: Reset camera</div>
                      </div>
                    </div>
                  </div>

                  {/* Initialize 3D Galaxy Map */}
                  {React.useEffect(() => {
                    if (currentPage === 'galaxy-map') {
                      const timer = setTimeout(() => {
                        if (window.initializeGalaxyMap) {
                          window.initializeGalaxyMap();
                        }
                      }, 100);
                      return () => clearTimeout(timer);
                    }
                  }, [currentPage])}

                  {/* Quick Stats */}
                  <div className="grid grid-cols-1 md:grid-cols-4 gap-6">
                    <div className="bg-white bg-opacity-5 rounded-lg p-6 text-center">
                      <div className="text-3xl font-bold text-blue-400 mb-2">{planets.length}</div>
                      <div className="text-gray-300">Total Destinations</div>
                    </div>
                    <div className="bg-white bg-opacity-5 rounded-lg p-6 text-center">
                      <div className="text-3xl font-bold text-green-400 mb-2">{planets.filter(p => p.type === 'exoplanet').length}</div>
                      <div className="text-gray-300">NASA Exoplanets</div>
                    </div>
                    <div className="bg-white bg-opacity-5 rounded-lg p-6 text-center">
                      <div className="text-3xl font-bold text-purple-400 mb-2">{spaceshipsData.length}</div>
                      <div className="text-gray-300">Available Ships</div>
                    </div>
                    <div className="bg-white bg-opacity-5 rounded-lg p-6 text-center">
                      <div className="text-3xl font-bold text-yellow-400 mb-2">âˆž</div>
                      <div className="text-gray-300">Adventures Await</div>
                    </div>
                  </div>
                </div>
              )}

              {/* Missions Page */}
              {currentPage === 'missions' && (
                <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
                  <div className="text-center mb-12">
                    <h1 className="text-4xl md:text-6xl font-bold text-white mb-4" style={{fontFamily: 'Orbitron, monospace'}}>
                      Space
                      <span className="block text-transparent bg-clip-text bg-gradient-to-r from-blue-400 to-purple-500">
                        Missions
                      </span>
                    </h1>
                    <p className="text-xl text-gray-300 max-w-2xl mx-auto">
                      Join exclusive space missions and expeditions across the galaxy.
                    </p>
                  </div>

                  {/* Mission Categories */}
                  <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
                    <div className="bg-white bg-opacity-5 rounded-lg p-6 hover:bg-opacity-10 transition-all cursor-pointer">
                      <div className="text-4xl mb-4">ðŸ”¬</div>
                      <h3 className="text-xl font-bold text-white mb-2">Scientific Expeditions</h3>
                      <p className="text-gray-300 mb-4">Join research missions to study exoplanets and search for signs of life.</p>
                      <div className="text-green-400 font-bold">Starting at 50,000 GC</div>
                    </div>

                    <div className="bg-white bg-opacity-5 rounded-lg p-6 hover:bg-opacity-10 transition-all cursor-pointer">
                      <div className="text-4xl mb-4">ðŸ—ï¸</div>
                      <h3 className="text-xl font-bold text-white mb-2">Colony Missions</h3>
                      <p className="text-gray-300 mb-4">Help establish new human settlements on distant worlds.</p>
                      <div className="text-green-400 font-bold">Starting at 75,000 GC</div>
                    </div>

                    <div className="bg-white bg-opacity-5 rounded-lg p-6 hover:bg-opacity-10 transition-all cursor-pointer">
                      <div className="text-4xl mb-4">âš¡</div>
                      <h3 className="text-xl font-bold text-white mb-2">Adventure Tours</h3>
                      <p className="text-gray-300 mb-4">Thrilling expeditions to the most extreme environments in space.</p>
                      <div className="text-green-400 font-bold">Starting at 100,000 GC</div>
                    </div>

                    <div className="bg-white bg-opacity-5 rounded-lg p-6 hover:bg-opacity-10 transition-all cursor-pointer">
                      <div className="text-4xl mb-4">ðŸŽ“</div>
                      <h3 className="text-xl font-bold text-white mb-2">Training Programs</h3>
                      <p className="text-gray-300 mb-4">Astronaut training and space survival courses.</p>
                      <div className="text-green-400 font-bold">Starting at 25,000 GC</div>
                    </div>

                    <div className="bg-white bg-opacity-5 rounded-lg p-6 hover:bg-opacity-10 transition-all cursor-pointer">
                      <div className="text-4xl mb-4">ðŸ’Ž</div>
                      <h3 className="text-xl font-bold text-white mb-2">Luxury Cruises</h3>
                      <p className="text-gray-300 mb-4">Premium space tourism with 5-star accommodations.</p>
                      <div className="text-green-400 font-bold">Starting at 200,000 GC</div>
                    </div>

                    <div className="bg-white bg-opacity-5 rounded-lg p-6 hover:bg-opacity-10 transition-all cursor-pointer">
                      <div className="text-4xl mb-4">ðŸŽ¬</div>
                      <h3 className="text-xl font-bold text-white mb-2">Fictional Worlds</h3>
                      <p className="text-gray-300 mb-4">Visit recreated worlds from your favorite sci-fi movies and shows.</p>
                      <div className="text-green-400 font-bold">Starting at 150,000 GC</div>
                    </div>
                  </div>
                </div>
              )}

              {/* Ship Details Page */}
              {currentPage === 'ship-details' && selectedSpaceship && (
                <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
                  {/* Back Button */}
                  <button
                    onClick={() => setCurrentPage('spaceships')}
                    className="flex items-center text-gray-300 hover:text-white transition-colors duration-300 mb-8"
                  >
                    â† Back to Fleet
                  </button>

                  <div className="grid grid-cols-1 lg:grid-cols-2 gap-12">
                    {/* Ship Image */}
                    <div className="space-y-4">
                      <div className="aspect-w-16 aspect-h-10 rounded-2xl overflow-hidden bg-gradient-to-br from-blue-500/20 to-purple-500/20">
                        <div className="w-full h-96 bg-gradient-to-br from-blue-500/20 to-purple-500/20 flex items-center justify-center relative">
                          {selectedSpaceship.image ? (
                            <img
                              src={selectedSpaceship.image}
                              alt={selectedSpaceship.name}
                              className="w-full h-full object-cover rounded-2xl"
                              onError={(e) => {
                                e.target.style.display = 'none';
                                e.target.nextElementSibling.style.display = 'flex';
                              }}
                            />
                          ) : null}
                          <div className="w-full h-full flex items-center justify-center" style={{display: selectedSpaceship.image ? 'none' : 'flex'}}>
                            <span className="text-8xl">{selectedSpaceship.emoji}</span>
                          </div>
                        </div>
                      </div>
                    </div>

                    {/* Ship Details */}
                    <div className="space-y-8">
                      {/* Header */}
                      <div>
                        <div className="flex items-center space-x-3 mb-3">
                          <div className="px-3 py-1 bg-green-500/20 text-green-400 rounded-full text-sm font-semibold border border-green-500/30">
                            âœ“ CERTIFIED OPERATIONAL
                          </div>
                          <div className="px-3 py-1 bg-blue-500/20 text-blue-400 rounded-full text-sm font-semibold border border-blue-500/30">
                            {selectedSpaceship.certification || 'ISA Certified'}
                          </div>
                        </div>

                        <h1 className="text-4xl font-bold text-white font-space mb-2">
                          {selectedSpaceship.name}
                        </h1>
                        <p className="text-xl text-gray-300 mb-4">
                          {selectedSpaceship.description}
                        </p>

                        <div className="grid grid-cols-2 md:grid-cols-4 gap-4 mb-6">
                          <div className="flex items-center space-x-2">
                            <span className="text-sm text-gray-400">by {selectedSpaceship.manufacturer}</span>
                          </div>
                          <div className="flex items-center space-x-2">
                            <span className="text-sm text-gray-400">Built {selectedSpaceship.yearBuilt || '2089'}</span>
                          </div>
                          <div className="flex items-center space-x-2">
                            <span className="text-sm text-gray-400">{selectedSpaceship.totalFlightHours?.toLocaleString() || '10,000+'} flight hours</span>
                          </div>
                          <div className="flex items-center space-x-2">
                            <span className="text-sm text-gray-400">{selectedSpaceship.successfulMissions || '500+'} missions</span>
                          </div>
                        </div>

                        {/* Real-time Status */}
                        <div className="bg-gray-800/50 rounded-lg p-4 mb-6 border border-gray-600">
                          <h3 className="text-lg font-semibold text-white mb-3">Real-Time Status</h3>
                          <div className="grid grid-cols-2 md:grid-cols-4 gap-4">
                            <div className="text-center">
                              <div className="text-green-400 font-bold">READY</div>
                              <div className="text-xs text-gray-400">Operational Status</div>
                            </div>
                            <div className="text-center">
                              <div className="text-blue-400 font-bold">DOCKED</div>
                              <div className="text-xs text-gray-400">Current Location</div>
                            </div>
                            <div className="text-center">
                              <div className="text-yellow-400 font-bold">{selectedSpaceship.lastMaintenance || '2090-06-15'}</div>
                              <div className="text-xs text-gray-400">Last Maintenance</div>
                            </div>
                            <div className="text-center">
                              <div className="text-purple-400 font-bold">AVAILABLE</div>
                              <div className="text-xs text-gray-400">Booking Status</div>
                            </div>
                          </div>
                        </div>
                      </div>

                      {/* Technical Specifications */}
                      <div>
                        <h3 className="text-xl font-semibold text-white mb-4">Technical Specifications</h3>
                        <div className="grid grid-cols-2 md:grid-cols-3 gap-4 mb-6">
                          <div className="bg-white/5 backdrop-blur-lg rounded-lg p-4 border border-gray-600">
                            <div className="text-sm text-gray-400 mb-1">Passenger Capacity</div>
                            <p className="text-2xl font-bold text-white">{selectedSpaceship.capacity}</p>
                            <p className="text-sm text-gray-400">maximum occupancy</p>
                          </div>

                          <div className="bg-white/5 backdrop-blur-lg rounded-lg p-4 border border-gray-600">
                            <div className="text-sm text-gray-400 mb-1">Maximum Velocity</div>
                            <p className="text-2xl font-bold text-white">{selectedSpaceship.maxSpeed?.toLocaleString()}</p>
                            <p className="text-sm text-gray-400">km/h sublight</p>
                          </div>

                          <div className="bg-white/5 backdrop-blur-lg rounded-lg p-4 border border-gray-600">
                            <div className="text-sm text-gray-400 mb-1">Safety Rating</div>
                            <p className="text-2xl font-bold text-white">{selectedSpaceship.safetyRating}/10</p>
                            <p className="text-sm text-gray-400">ISA certified</p>
                          </div>

                          <div className="bg-white/5 backdrop-blur-lg rounded-lg p-4 border border-gray-600">
                            <div className="text-sm text-gray-400 mb-1">Comfort Rating</div>
                            <div className="flex items-center mb-1">
                              {Array.from({length: 5}, (_, i) => (
                                <span key={i} className={`text-lg ${i < selectedSpaceship.comfortLevel ? 'text-yellow-400' : 'text-gray-600'}`}>â­</span>
                              ))}
                            </div>
                            <p className="text-sm text-gray-400">{selectedSpaceship.comfortLevel}/10 luxury</p>
                          </div>

                          <div className="bg-white/5 backdrop-blur-lg rounded-lg p-4 border border-gray-600">
                            <div className="text-sm text-gray-400 mb-1">Vessel Mass</div>
                            <p className="text-2xl font-bold text-white">{selectedSpaceship.technicalSpecs?.mass || '1,200 tonnes'}</p>
                            <p className="text-sm text-gray-400">dry weight</p>
                          </div>

                          <div className="bg-white/5 backdrop-blur-lg rounded-lg p-4 border border-gray-600">
                            <div className="text-sm text-gray-400 mb-1">Operational Range</div>
                            <p className="text-xl font-bold text-white">{selectedSpaceship.technicalSpecs?.operationalRange || selectedSpaceship.range}</p>
                            <p className="text-sm text-gray-400">maximum distance</p>
                          </div>
                        </div>

                        {/* Propulsion System */}
                        <div className="bg-gray-800/50 rounded-lg p-6 border border-gray-600 mb-6">
                          <h4 className="text-lg font-semibold text-white mb-4">Propulsion & Power Systems</h4>
                          <div className="grid grid-cols-1 md:grid-cols-2 gap-6">
                            <div>
                              <div className="space-y-3">
                                <div className="flex justify-between">
                                  <span className="text-gray-400">Engine Type:</span>
                                  <span className="text-white font-semibold">{selectedSpaceship.engineType || 'Advanced Propulsion'}</span>
                                </div>
                                <div className="flex justify-between">
                                  <span className="text-gray-400">Thrust Output:</span>
                                  <span className="text-white font-semibold">{selectedSpaceship.thrust || '2,400 kN'}</span>
                                </div>
                                <div className="flex justify-between">
                                  <span className="text-gray-400">Fuel Type:</span>
                                  <span className="text-white font-semibold">{selectedSpaceship.fuelType}</span>
                                </div>
                                {selectedSpaceship.warpCapable && (
                                  <div className="flex justify-between">
                                    <span className="text-gray-400">Warp Capability:</span>
                                    <span className="text-green-400 font-semibold">âœ“ FTL Capable</span>
                                  </div>
                                )}
                              </div>
                            </div>
                            <div>
                              <div className="space-y-3">
                                <div className="flex justify-between">
                                  <span className="text-gray-400">Power Generation:</span>
                                  <span className="text-white font-semibold">{selectedSpaceship.technicalSpecs?.powerGeneration || 'Fusion Reactor'}</span>
                                </div>
                                <div className="flex justify-between">
                                  <span className="text-gray-400">Communication Range:</span>
                                  <span className="text-white font-semibold">{selectedSpaceship.technicalSpecs?.communicationRange || '50 AU'}</span>
                                </div>
                                <div className="flex justify-between">
                                  <span className="text-gray-400">Cargo Capacity:</span>
                                  <span className="text-white font-semibold">{selectedSpaceship.technicalSpecs?.cargoCapacity || '150 tonnes'}</span>
                                </div>
                              </div>
                            </div>
                          </div>
                        </div>

                        {/* Amenities */}
                        <div className="bg-gray-800/50 rounded-lg p-6 border border-gray-600">
                          <h4 className="text-lg font-semibold text-white mb-4">Onboard Amenities</h4>
                          <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
                            {selectedSpaceship.amenities.map((amenity, index) => (
                              <div key={index} className="flex items-center text-gray-300">
                                <span className="text-green-400 mr-3">âœ“</span>
                                <span>{amenity}</span>
                              </div>
                            ))}
                          </div>
                        </div>
                      </div>

                      {/* Action Button */}
                      <button
                        onClick={() => {
                          setBooking(prev => ({...prev, spaceship: selectedSpaceship}));
                          setCurrentPage('booking');
                        }}
                        className="w-full py-4 rounded-lg font-semibold text-lg transition-all duration-300 bg-gradient-to-r from-blue-500 to-purple-600 text-white hover:from-blue-600 hover:to-purple-700"
                      >
                        ðŸš€ Select This Spaceship for Mission
                      </button>
                    </div>
                  </div>
                </div>
              )}

              {/* Booking Page */}
              {currentPage === 'booking' && (
                <div className="max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
                  {/* Header */}
                  <div className="text-center mb-12">
                    <h1 className="text-5xl font-bold text-white font-space mb-4">
                      <span className="block text-transparent bg-clip-text bg-gradient-to-r from-blue-400 to-purple-500">
                        Mission Authorization
                      </span>
                    </h1>
                    <p className="text-xl text-gray-300 max-w-2xl mx-auto">
                      Complete your space mission booking with our comprehensive authorization system
                    </p>
                  </div>

                  {/* Progress Steps */}
                  <div className="mb-12">
                    <div className="flex justify-between items-center max-w-4xl mx-auto">
                      {[
                        { id: 1, title: 'Traveler Profile', icon: 'ðŸ‘¤' },
                        { id: 2, title: 'Destination', icon: 'ðŸŒ' },
                        { id: 3, title: 'Spacecraft', icon: 'ðŸš€' },
                        { id: 4, title: 'Mission Details', icon: 'ðŸ“…' },
                        { id: 5, title: 'Medical Clearance', icon: 'ðŸ¥' },
                        { id: 6, title: 'Authorization', icon: 'ðŸ’³' },
                        { id: 7, title: 'Confirmation', icon: 'âœ…' }
                      ].map((step, index) => {
                        const isActive = bookingStep === step.id;
                        const isCompleted = bookingStep > step.id;

                        return (
                          <div key={step.id} className="flex items-center">
                            <div className={`
                              relative flex items-center justify-center w-12 h-12 rounded-full border-2 transition-all duration-300
                              ${isActive ? 'border-blue-400 bg-blue-400 text-black' :
                                isCompleted ? 'border-green-500 bg-green-500 text-white' :
                                'border-gray-600 bg-gray-800 text-gray-400'}
                            `}>
                              <span className="text-lg">{step.icon}</span>
                            </div>
                            <div className="ml-3 hidden sm:block">
                              <p className={`text-sm font-medium ${isActive ? 'text-blue-400' : isCompleted ? 'text-green-400' : 'text-gray-400'}`}>
                                {step.title}
                              </p>
                            </div>
                            {index < 6 && (
                              <div className={`
                                hidden sm:block w-16 h-0.5 ml-6 transition-colors duration-300
                                ${isCompleted ? 'bg-green-500' : 'bg-gray-600'}
                              `} />
                            )}
                          </div>
                        );
                      })}
                    </div>
                  </div>

                  {/* Booking Form */}
                  <div className="bg-white/5 backdrop-blur-lg rounded-2xl border border-gray-600 p-8">
                    {/* Step 1: Traveler Profile */}
                    {bookingStep === 1 && (
                      <div className="space-y-6">
                        <h2 className="text-3xl font-bold text-white mb-6">
                          <span className="flex items-center">
                            ðŸ‘¤ Traveler Profile & Certification
                          </span>
                        </h2>

                        <div className="bg-blue-500/10 border border-blue-500/30 rounded-lg p-4 mb-6">
                          <p className="text-blue-300 text-sm">
                            <strong>âš ï¸ SPACE TRAVEL REQUIREMENTS:</strong> All passengers must meet ISA (Interstellar Safety Authority)
                            medical and psychological standards for space travel. Certification process takes 24-48 hours.
                          </p>
                        </div>

                        <div className="grid grid-cols-1 md:grid-cols-2 gap-6">
                          <div>
                            <label className="block text-sm font-medium text-gray-300 mb-2">
                              Full Legal Name *
                            </label>
                            <input
                              type="text"
                              value={booking.travelerName}
                              onChange={(e) => setBooking(prev => ({...prev, travelerName: e.target.value}))}
                              className="w-full px-4 py-3 bg-gray-800 border border-gray-600 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-blue-400"
                              placeholder="As shown on government ID"
                            />
                            <p className="text-xs text-gray-400 mt-1">Must match passport/ID exactly</p>
                          </div>

                          <div>
                            <label className="block text-sm font-medium text-gray-300 mb-2">
                              Contact Email *
                            </label>
                            <input
                              type="email"
                              value={booking.email}
                              onChange={(e) => setBooking(prev => ({...prev, email: e.target.value}))}
                              className="w-full px-4 py-3 bg-gray-800 border border-gray-600 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-blue-400"
                              placeholder="mission.updates@example.com"
                            />
                            <p className="text-xs text-gray-400 mt-1">For mission updates and emergency contact</p>
                          </div>

                          <div>
                            <label className="block text-sm font-medium text-gray-300 mb-2">
                              ISA Certification ID
                            </label>
                            <input
                              type="text"
                              value={booking.isaId}
                              onChange={(e) => setBooking(prev => ({...prev, isaId: e.target.value}))}
                              className="w-full px-4 py-3 bg-gray-800 border border-gray-600 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-blue-400"
                              placeholder="ISA-2090-XXXXXXXX (if available)"
                            />
                            <p className="text-xs text-gray-400 mt-1">Leave blank if first-time traveler</p>
                          </div>

                          <div>
                            <label className="block text-sm font-medium text-gray-300 mb-2">
                              Emergency Contact
                            </label>
                            <input
                              type="text"
                              value={booking.emergencyContact}
                              onChange={(e) => setBooking(prev => ({...prev, emergencyContact: e.target.value}))}
                              className="w-full px-4 py-3 bg-gray-800 border border-gray-600 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-blue-400"
                              placeholder="Name and phone number"
                            />
                            <p className="text-xs text-gray-400 mt-1">Required for all space missions</p>
                          </div>
                        </div>

                        <div>
                          <label className="block text-sm font-medium text-gray-300 mb-2">
                            Mission Type
                          </label>
                          <div className="grid grid-cols-3 gap-4">
                            {[
                              { value: 'solo', label: 'Solo Adventure', icon: 'ðŸ‘¤' },
                              { value: 'couple', label: 'Romantic Getaway', icon: 'ðŸ’•' },
                              { value: 'family', label: 'Family Mission', icon: 'ðŸ‘¨â€ðŸ‘©â€ðŸ‘§â€ðŸ‘¦' }
                            ].map(({ value, label, icon }) => (
                              <button
                                key={value}
                                onClick={() => setBooking(prev => ({...prev, tripType: value}))}
                                className={`p-4 rounded-lg border-2 transition-all duration-300 ${
                                  booking.tripType === value
                                    ? 'border-blue-400 bg-blue-400/20 text-blue-400'
                                    : 'border-gray-600 bg-gray-800 text-gray-300 hover:border-gray-500'
                                }`}
                              >
                                <span className="text-2xl block mb-2">{icon}</span>
                                <p className="text-sm font-medium">{label}</p>
                              </button>
                            ))}
                          </div>
                        </div>

                        <div>
                          <label className="block text-sm font-medium text-gray-300 mb-2">
                            Number of Passengers
                          </label>
                          <input
                            type="number"
                            min="1"
                            max="10"
                            value={booking.passengers}
                            onChange={(e) => setBooking(prev => ({...prev, passengers: parseInt(e.target.value) || 1}))}
                            className="w-full px-4 py-3 bg-gray-800 border border-gray-600 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-blue-400"
                          />
                        </div>
                      </div>
                    )}

                    {/* Step 7: Mission Confirmation */}
                    {bookingStep === 7 && (
                      <div className="text-center space-y-6">
                        <div className="text-6xl mb-6">âœ…</div>

                        <h2 className="text-4xl font-bold text-white mb-4">Mission Authorization Complete!</h2>
                        <p className="text-xl text-gray-300 mb-6">
                          Your space mission to {booking.destination?.name || 'your selected destination'} has been officially authorized and scheduled.
                        </p>

                        <div className="bg-green-500/10 border border-green-500/30 rounded-lg p-4 mb-6">
                          <p className="text-green-300 text-sm">
                            <strong>âœ… MISSION STATUS:</strong> CONFIRMED - Your spacecraft {booking.spaceship?.name || 'has been assigned'} is being prepared for departure.
                            Mission Control will contact you within 24 hours with detailed pre-flight instructions.
                          </p>
                        </div>

                        <div className="bg-gray-800/50 rounded-lg p-6 max-w-md mx-auto">
                          <h3 className="text-lg font-semibold text-white mb-4">Mission Timeline</h3>
                          <ul className="text-left space-y-2 text-gray-300">
                            <li>â€¢ <strong>T-72 hours:</strong> Medical clearance confirmation</li>
                            <li>â€¢ <strong>T-48 hours:</strong> Pre-flight training scheduled</li>
                            <li>â€¢ <strong>T-24 hours:</strong> Final mission briefing</li>
                            <li>â€¢ <strong>T-4 hours:</strong> Report to launch facility</li>
                            <li>â€¢ <strong>T-0:</strong> Mission departure</li>
                          </ul>
                        </div>

                        <div className="bg-blue-500/10 border border-blue-500/30 rounded-lg p-6 max-w-md mx-auto">
                          <h3 className="text-lg font-semibold text-white mb-4">Mission Control Contact</h3>
                          <div className="text-left space-y-2 text-gray-300">
                            <p><strong>Mission ID:</strong> {missionId || generateMissionId()}</p>
                            <p><strong>Launch Facility:</strong> Orbital Station Alpha-7</p>
                            <p><strong>Mission Commander:</strong> Will be assigned 48 hours before departure</p>
                            <p><strong>Emergency Hotline:</strong> +1-800-SPACE-911</p>
                            <p><strong>Estimated Duration:</strong> {calculateMissionDuration()}</p>
                            <p><strong>Total Cost:</strong> ${booking.totalCost?.toLocaleString() || '0'}</p>
                          </div>
                        </div>

                        {/* Start Exploration Game */}
                        <div className="mt-8">
                          <button
                            onClick={startPlanetExploration}
                            className="w-full py-4 rounded-lg font-semibold text-lg transition-all duration-300 bg-gradient-to-r from-green-500 to-blue-600 text-white hover:from-green-600 hover:to-blue-700"
                          >
                            ðŸŽ® Start Planet Exploration Game
                          </button>
                          <p className="text-center text-gray-400 text-sm mt-2">
                            Experience your destination before departure!
                          </p>
                        </div>
                      </div>
                    )}

                    {/* Navigation Buttons */}
                    {bookingStep < 7 && (
                      <div className="flex justify-between items-center mt-8 pt-6 border-t border-gray-600">
                        <button
                          onClick={() => setBookingStep(prev => Math.max(prev - 1, 1))}
                          disabled={bookingStep === 1}
                          className={`flex items-center px-6 py-3 rounded-lg transition-all duration-300 ${
                            bookingStep === 1
                              ? 'bg-gray-700 text-gray-500 cursor-not-allowed'
                              : 'bg-gray-700 text-white hover:bg-gray-600'
                          }`}
                        >
                          â† Previous
                        </button>

                        <div className="text-center">
                          <p className="text-sm text-gray-400">
                            Step {bookingStep} of 7
                          </p>
                        </div>

                        {bookingStep < 7 ? (
                          <button
                            onClick={nextBookingStep}
                            className="flex items-center px-6 py-3 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-all duration-300 font-semibold"
                          >
                            {bookingStep === 6 ? 'Authorize Mission' : 'Next Step'} â†’
                          </button>
                        ) : null}
                      </div>
                    )}
                  </div>
                </div>
              )}

              {/* Planet Exploration Game */}
              {gameMode && (
                <div className="fixed inset-0 bg-black/90 backdrop-blur-lg z-50 flex items-center justify-center">
                  <div className="max-w-6xl mx-auto p-8 bg-gray-900/95 rounded-2xl border border-blue-500/30 max-h-[90vh] overflow-y-auto">
                    {/* Game Header */}
                    <div className="flex justify-between items-center mb-6">
                      <h2 className="text-3xl font-bold text-white">
                        ðŸŒ Planet Exploration: {booking.destination?.name || 'Unknown World'}
                      </h2>
                      <button
                        onClick={() => setGameMode(false)}
                        className="text-gray-400 hover:text-white text-2xl"
                      >
                        âœ•
                      </button>
                    </div>

                    {/* Game Stats */}
                    <div className="grid grid-cols-4 gap-4 mb-6">
                      <div className="bg-blue-500/20 rounded-lg p-4 text-center">
                        <div className="text-2xl font-bold text-blue-400">{gameState.energy}%</div>
                        <div className="text-sm text-gray-300">Energy</div>
                      </div>
                      <div className="bg-green-500/20 rounded-lg p-4 text-center">
                        <div className="text-2xl font-bold text-green-400">{gameState.score}</div>
                        <div className="text-sm text-gray-300">Score</div>
                      </div>
                      <div className="bg-purple-500/20 rounded-lg p-4 text-center">
                        <div className="text-2xl font-bold text-purple-400">{gameState.discoveries.length}</div>
                        <div className="text-sm text-gray-300">Discoveries</div>
                      </div>
                      <div className="bg-yellow-500/20 rounded-lg p-4 text-center">
                        <div className="text-2xl font-bold text-yellow-400">{gameState.missionTime}</div>
                        <div className="text-sm text-gray-300">Mission Time</div>
                      </div>
                    </div>

                    <div className="grid grid-cols-1 lg:grid-cols-2 gap-8">
                      {/* Planet Surface */}
                      <div className="space-y-6">
                        <h3 className="text-xl font-semibold text-white mb-4">ðŸŒ Planet Surface</h3>

                        {/* Planet Image */}
                        <div className="relative">
                          <img
                            src={booking.destination?.image || generatePlanetImage('default')}
                            alt={booking.destination?.name}
                            className="w-full h-64 object-cover rounded-lg"
                            onError={(e) => {
                              e.target.src = 'https://images-assets.nasa.gov/image/PIA23122/PIA23122~medium.jpg';
                            }}
                          />
                          <div className="absolute inset-0 bg-gradient-to-t from-black/50 to-transparent rounded-lg"></div>
                          <div className="absolute bottom-4 left-4 text-white">
                            <h4 className="text-lg font-bold">{booking.destination?.name}</h4>
                            <p className="text-sm opacity-80">{booking.destination?.description}</p>
                          </div>
                        </div>

                        {/* Exploration Locations */}
                        <div className="grid grid-cols-2 gap-4">
                          {[
                            { id: 'surface', name: 'Surface Base', icon: 'ðŸ­', description: 'Explore the main research facility' },
                            { id: 'caves', name: 'Underground Caves', icon: 'ðŸ•³ï¸', description: 'Venture into mysterious caverns' },
                            { id: 'mountains', name: 'Mountain Range', icon: 'â›°ï¸', description: 'Scale the highest peaks' },
                            { id: 'ocean', name: 'Alien Ocean', icon: 'ðŸŒŠ', description: 'Dive into unknown waters' },
                            { id: 'forest', name: 'Crystal Forest', icon: 'ðŸŒ²', description: 'Navigate crystalline formations' },
                            { id: 'ruins', name: 'Ancient Ruins', icon: 'ðŸ›ï¸', description: 'Investigate alien artifacts' }
                          ].map((location) => (
                            <button
                              key={location.id}
                              onClick={() => exploreLocation(location.id)}
                              disabled={gameState.energy < 10}
                              className={`p-4 rounded-lg border-2 transition-all duration-300 text-left ${
                                gameState.currentLocation === location.id
                                  ? 'border-blue-400 bg-blue-400/20 text-blue-400'
                                  : gameState.energy < 10
                                  ? 'border-gray-600 bg-gray-800/50 text-gray-500 cursor-not-allowed'
                                  : 'border-gray-600 bg-gray-800 text-gray-300 hover:border-gray-500 hover:bg-gray-700'
                              }`}
                            >
                              <div className="text-2xl mb-2">{location.icon}</div>
                              <div className="font-semibold">{location.name}</div>
                              <div className="text-xs opacity-80">{location.description}</div>
                              {gameState.energy < 10 && (
                                <div className="text-xs text-red-400 mt-1">Need more energy!</div>
                              )}
                            </button>
                          ))}
                        </div>

                        {/* Rest Button */}
                        <button
                          onClick={restAtBase}
                          className="w-full py-3 rounded-lg bg-green-600 hover:bg-green-700 text-white font-semibold transition-all duration-300"
                        >
                          ðŸ›Œ Rest at Base (+50 Energy)
                        </button>
                      </div>

                      {/* Discoveries & Inventory */}
                      <div className="space-y-6">
                        <h3 className="text-xl font-semibold text-white mb-4">ðŸ“‹ Mission Log</h3>

                        {/* Recent Discoveries */}
                        <div className="bg-gray-800/50 rounded-lg p-4">
                          <h4 className="text-lg font-semibold text-white mb-3">ðŸ” Recent Discoveries</h4>
                          <div className="space-y-3 max-h-64 overflow-y-auto">
                            {gameState.discoveries.length === 0 ? (
                              <p className="text-gray-400 text-center py-4">No discoveries yet. Start exploring!</p>
                            ) : (
                              gameState.discoveries.slice(-5).reverse().map((discovery, index) => (
                                <div key={index} className="bg-gray-700/50 rounded-lg p-3">
                                  <div className="flex justify-between items-start mb-2">
                                    <h5 className="font-semibold text-white">{discovery.name}</h5>
                                    <span className="text-green-400 font-bold">+{discovery.points}</span>
                                  </div>
                                  <p className="text-gray-300 text-sm">{discovery.description}</p>
                                  <div className="text-xs text-gray-400 mt-1">
                                    Type: {discovery.type.charAt(0).toUpperCase() + discovery.type.slice(1)}
                                  </div>
                                </div>
                              ))
                            )}
                          </div>
                        </div>

                        {/* Inventory */}
                        <div className="bg-gray-800/50 rounded-lg p-4">
                          <h4 className="text-lg font-semibold text-white mb-3">ðŸŽ’ Inventory</h4>
                          <div className="grid grid-cols-2 gap-2">
                            {gameState.inventory.length === 0 ? (
                              <p className="text-gray-400 text-center py-4 col-span-2">Inventory empty</p>
                            ) : (
                              gameState.inventory.map((item, index) => (
                                <div key={index} className="bg-gray-700/50 rounded p-2 text-sm text-gray-300">
                                  {item}
                                </div>
                              ))
                            )}
                          </div>
                        </div>

                        {/* Mission Completion Screen */}
                        {gameState.missionComplete && (
                          <div className="bg-gradient-to-r from-green-500/20 to-blue-500/20 rounded-lg p-6 mb-4 border border-green-500/30">
                            <div className="text-center">
                              <div className="text-6xl mb-4">ðŸŽ‰</div>
                              <h3 className="text-2xl font-bold text-green-400 mb-2">Mission Complete!</h3>
                              <p className="text-gray-300 mb-4">Congratulations! You've successfully completed your exploration mission.</p>

                              <div className="grid grid-cols-2 gap-4 mb-6">
                                <div className="bg-gray-800/50 rounded-lg p-3">
                                  <div className="text-xl font-bold text-yellow-400">{gameState.score}</div>
                                  <div className="text-sm text-gray-300">Final Score</div>
                                </div>
                                <div className="bg-gray-800/50 rounded-lg p-3">
                                  <div className="text-xl font-bold text-purple-400">{gameState.discoveries.length}</div>
                                  <div className="text-sm text-gray-300">Discoveries</div>
                                </div>
                              </div>

                              <div className="space-y-2 mb-6">
                                <h4 className="text-lg font-semibold text-white">ðŸ† Achievements Unlocked</h4>
                                {gameState.achievements.map((achievement, index) => (
                                  <div key={index} className="bg-yellow-500/20 rounded-lg p-2 text-yellow-300">
                                    {achievement === 'first_discovery' && 'ðŸŒŸ First Discovery - Made your first scientific discovery'}
                                    {achievement === 'explorer' && 'ðŸ—ºï¸ Explorer - Found 5 discoveries'}
                                    {achievement === 'high_scorer' && 'ðŸ’¯ High Scorer - Reached 500 points'}
                                    {achievement === 'xenobiologist' && 'ðŸ§¬ Xenobiologist - Discovered alien life'}
                                    {achievement === 'master_explorer' && 'ðŸ‘‘ Master Explorer - Found 10 discoveries'}
                                  </div>
                                ))}
                              </div>

                              <div className="flex gap-4 justify-center">
                                <button
                                  onClick={exitGame}
                                  className="px-6 py-3 bg-green-500 text-white rounded-lg hover:bg-green-600 transition-all duration-300 font-semibold"
                                >
                                  Return to Portal
                                </button>
                                <button
                                  onClick={() => setGameState(prev => ({...prev, missionComplete: false}))}
                                  className="px-6 py-3 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-all duration-300 font-semibold"
                                >
                                  Continue Exploring
                                </button>
                              </div>
                            </div>
                          </div>
                        )}

                        {/* Mission Objectives */}
                        <div className="bg-gray-800/50 rounded-lg p-4">
                          <h4 className="text-lg font-semibold text-white mb-3">ðŸŽ¯ Mission Objectives</h4>
                          <div className="space-y-2">
                            <div className={`flex items-center ${gameState.discoveries.length >= 1 ? 'text-green-400' : 'text-gray-400'}`}>
                              <span className="mr-2">{gameState.discoveries.length >= 1 ? 'âœ…' : 'â³'}</span>
                              Make your first discovery
                            </div>
                            <div className={`flex items-center ${gameState.discoveries.length >= 5 ? 'text-green-400' : 'text-gray-400'}`}>
                              <span className="mr-2">{gameState.discoveries.length >= 5 ? 'âœ…' : 'â³'}</span>
                              Find 5 discoveries
                            </div>
                            <div className={`flex items-center ${gameState.score >= 500 ? 'text-green-400' : 'text-gray-400'}`}>
                              <span className="mr-2">{gameState.score >= 500 ? 'âœ…' : 'â³'}</span>
                              Reach 500 points
                            </div>
                            <div className={`flex items-center ${gameState.discoveries.some(d => d.type === 'life') ? 'text-green-400' : 'text-gray-400'}`}>
                              <span className="mr-2">{gameState.discoveries.some(d => d.type === 'life') ? 'âœ…' : 'â³'}</span>
                              Discover alien life
                            </div>
                            <div className={`flex items-center ${gameState.discoveries.length >= 10 ? 'text-green-400' : 'text-gray-400'}`}>
                              <span className="mr-2">{gameState.discoveries.length >= 10 ? 'âœ…' : 'â³'}</span>
                              Master Explorer (10 discoveries)
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              )}

              {/* My Bookings Page */}
              {currentPage === 'my-bookings' && (
                <div className="max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
                  {/* Header */}
                  <div className="text-center mb-12">
                    <h1 className="text-5xl font-bold text-white font-space mb-4">
                      <span className="block text-transparent bg-clip-text bg-gradient-to-r from-blue-400 to-purple-500">
                        My Space Missions
                      </span>
                    </h1>
                    <p className="text-xl text-gray-300 max-w-2xl mx-auto">
                      Track your confirmed space missions and upcoming adventures.
                    </p>
                  </div>

                  {/* Load bookings from localStorage */}
                  {(() => {
                    const savedBookings = JSON.parse(localStorage.getItem('spaceBookings') || '[]');
                    const allBookings = [...bookingHistory, ...savedBookings];

                    if (allBookings.length === 0) {
                      return (
                        <div className="text-center py-12">
                          <div className="text-6xl mb-6">ðŸš€</div>
                          <h3 className="text-2xl font-bold text-white mb-4">No Missions Yet</h3>
                          <p className="text-gray-400 mb-8">You haven't booked any space missions yet. Start your adventure!</p>
                          <button
                            onClick={() => setCurrentPage('destinations')}
                            className="px-8 py-4 bg-gradient-to-r from-blue-500 to-purple-600 text-white rounded-lg hover:from-blue-600 hover:to-purple-700 transition-all duration-300 font-semibold"
                          >
                            Explore Destinations
                          </button>
                        </div>
                      );
                    }

                    return (
                      <div className="space-y-6">
                        {allBookings.map((mission, index) => (
                          <div key={mission.missionId || index} className="bg-white/5 backdrop-blur-lg rounded-2xl border border-gray-600 p-6">
                            <div className="grid grid-cols-1 lg:grid-cols-3 gap-6">
                              {/* Mission Info */}
                              <div className="lg:col-span-2">
                                <div className="flex items-center justify-between mb-4">
                                  <h3 className="text-2xl font-bold text-white">
                                    Mission to {mission.destination?.name || 'Unknown Destination'}
                                  </h3>
                                  <span className={`px-3 py-1 rounded-full text-sm font-semibold ${
                                    mission.status === 'CONFIRMED'
                                      ? 'bg-green-500/20 text-green-400 border border-green-500/30'
                                      : 'bg-yellow-500/20 text-yellow-400 border border-yellow-500/30'
                                  }`}>
                                    {mission.status || 'CONFIRMED'}
                                  </span>
                                </div>

                                <div className="grid grid-cols-2 gap-4 text-sm">
                                  <div>
                                    <p className="text-gray-400">Mission ID</p>
                                    <p className="text-white font-mono">{mission.missionId || 'N/A'}</p>
                                  </div>
                                  <div>
                                    <p className="text-gray-400">Spacecraft</p>
                                    <p className="text-white">{mission.spaceship?.name || 'TBD'}</p>
                                  </div>
                                  <div>
                                    <p className="text-gray-400">Launch Date</p>
                                    <p className="text-white">
                                      {mission.launchDate
                                        ? new Date(mission.launchDate).toLocaleDateString()
                                        : 'TBD'
                                      }
                                    </p>
                                  </div>
                                  <div>
                                    <p className="text-gray-400">Duration</p>
                                    <p className="text-white">{mission.estimatedDuration || 'TBD'}</p>
                                  </div>
                                  <div>
                                    <p className="text-gray-400">Passengers</p>
                                    <p className="text-white">{mission.passengers || 1}</p>
                                  </div>
                                  <div>
                                    <p className="text-gray-400">Total Cost</p>
                                    <p className="text-white font-semibold">${(mission.totalCost || 0).toLocaleString()}</p>
                                  </div>
                                </div>
                              </div>

                              {/* Mission Image */}
                              <div className="flex items-center justify-center">
                                <div className="w-full h-32 bg-gradient-to-br from-blue-500/20 to-purple-500/20 rounded-lg flex items-center justify-center">
                                  {mission.destination?.image ? (
                                    <img
                                      src={mission.destination.image}
                                      alt={mission.destination.name}
                                      className="w-full h-full object-cover rounded-lg"
                                    />
                                  ) : (
                                    <span className="text-4xl">ðŸŒ</span>
                                  )}
                                </div>
                              </div>
                            </div>

                            {/* Action Buttons */}
                            <div className="flex gap-4 mt-6 pt-4 border-t border-gray-600">
                              <button className="flex-1 py-2 px-4 bg-blue-500/20 text-blue-400 border border-blue-500/30 rounded-lg hover:bg-blue-500/30 transition-all duration-300">
                                View Details
                              </button>
                              <button className="flex-1 py-2 px-4 bg-purple-500/20 text-purple-400 border border-purple-500/30 rounded-lg hover:bg-purple-500/30 transition-all duration-300">
                                Contact Mission Control
                              </button>
                            </div>
                          </div>
                        ))}
                      </div>
                    );
                  })()}
                </div>
              )}

              {/* Other pages placeholder */}
              {currentPage !== 'home' && currentPage !== 'destinations' && currentPage !== 'planet-details' && currentPage !== 'spaceships' && currentPage !== 'galaxy-map' && currentPage !== 'missions' && currentPage !== 'ship-details' && currentPage !== 'booking' && currentPage !== 'my-bookings' && (
                <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
                  <div className="text-center py-12">
                    <span className="text-6xl mb-4 block">ðŸš€</span>
                    <h3 className="text-xl font-bold text-white mb-2">{currentPage.charAt(0).toUpperCase() + currentPage.slice(1)}</h3>
                    <p className="text-gray-400">Coming soon...</p>
                  </div>
                </div>
              )}
            </main>

            {/* AI Space Assistant Chatbot */}
            <div className="fixed bottom-4 right-4 z-50">
              <div className={`transition-all duration-300 ${showChatbot ? 'opacity-100 scale-100' : 'opacity-0 scale-95 pointer-events-none'}`}>
                <div className="bg-black/90 backdrop-blur-lg rounded-lg border border-blue-500/30 w-80 h-96 flex flex-col">
                  {/* Chatbot Header */}
                  <div className="flex items-center justify-between p-4 border-b border-gray-600">
                    <div className="flex items-center space-x-2">
                      <div className="w-8 h-8 bg-gradient-to-r from-blue-400 to-purple-500 rounded-full flex items-center justify-center">
                        <span className="text-white text-sm">ðŸ¤–</span>
                      </div>
                      <div>
                        <h3 className="text-white font-semibold">ARIA</h3>
                        <p className="text-xs text-gray-400">AI Space Assistant</p>
                      </div>
                    </div>
                    <button
                      onClick={() => setShowChatbot(false)}
                      className="text-gray-400 hover:text-white transition-colors"
                    >
                      âœ•
                    </button>
                  </div>

                  {/* Chat Messages */}
                  <div className="flex-1 p-4 overflow-y-auto space-y-3" id="chat-messages">
                    <div className="flex items-start space-x-2">
                      <div className="w-6 h-6 bg-blue-500 rounded-full flex items-center justify-center flex-shrink-0">
                        <span className="text-white text-xs">ðŸ¤–</span>
                      </div>
                      <div className="bg-blue-500/20 rounded-lg p-3 max-w-xs">
                        <p className="text-white text-sm">
                          Hello! I'm ARIA, your AI Space Assistant. I can help you with:
                          <br />â€¢ Planet information
                          <br />â€¢ Travel recommendations
                          <br />â€¢ Spaceship details
                          <br />â€¢ Mission planning
                        </p>
                      </div>
                    </div>
                    {chatMessages.map((message, index) => (
                      <div key={index} className={`flex items-start space-x-2 ${message.sender === 'user' ? 'flex-row-reverse space-x-reverse' : ''}`}>
                        <div className={`w-6 h-6 rounded-full flex items-center justify-center flex-shrink-0 ${
                          message.sender === 'user' ? 'bg-purple-500' : 'bg-blue-500'
                        }`}>
                          <span className="text-white text-xs">{message.sender === 'user' ? 'ðŸ‘¤' : 'ðŸ¤–'}</span>
                        </div>
                        <div className={`rounded-lg p-3 max-w-xs ${
                          message.sender === 'user'
                            ? 'bg-purple-500/20 text-white'
                            : 'bg-blue-500/20 text-white'
                        }`}>
                          <p className="text-sm">{message.text}</p>
                        </div>
                      </div>
                    ))}
                  </div>

                  {/* Chat Input */}
                  <div className="p-4 border-t border-gray-600">
                    <div className="flex space-x-2">
                      <input
                        type="text"
                        value={chatInput}
                        onChange={(e) => setChatInput(e.target.value)}
                        onKeyPress={(e) => e.key === 'Enter' && sendChatMessage()}
                        placeholder="Ask me about space travel..."
                        className="flex-1 px-3 py-2 bg-gray-800 border border-gray-600 rounded-lg text-white text-sm focus:outline-none focus:ring-2 focus:ring-blue-400"
                      />
                      <button
                        onClick={sendChatMessage}
                        className="px-4 py-2 bg-blue-500 hover:bg-blue-600 rounded-lg text-white text-sm transition-colors"
                      >
                        Send
                      </button>
                    </div>
                  </div>
                </div>
              </div>

              {/* Chatbot Toggle Button */}
              <button
                onClick={() => setShowChatbot(!showChatbot)}
                className={`w-14 h-14 bg-gradient-to-r from-blue-500 to-purple-600 rounded-full flex items-center justify-center text-white shadow-lg hover:shadow-xl transition-all duration-300 ${
                  showChatbot ? 'scale-0' : 'scale-100'
                }`}
              >
                <span className="text-xl">ðŸ¤–</span>
              </button>
            </div>
          </div>
        );
      }

      console.log('React:', typeof React);
      console.log('ReactDOM:', typeof ReactDOM);
      
      const root = ReactDOM.createRoot(document.getElementById('root'));
      root.render(<SpaceApp />);

      // 3D Galaxy Map Implementation
      let galaxyScene, galaxyCamera, galaxyRenderer, galaxyControls;
      let planetMeshes = [];
      let selectedPlanetMesh = null;

      function initializeGalaxyMap() {
        const canvas = document.getElementById('galaxy-canvas');
        if (!canvas || galaxyScene) return; // Already initialized or canvas not found

        // Scene setup
        galaxyScene = new THREE.Scene();
        galaxyScene.background = new THREE.Color(0x000011);

        // Camera setup
        galaxyCamera = new THREE.PerspectiveCamera(75, canvas.clientWidth / canvas.clientHeight, 0.1, 10000);
        galaxyCamera.position.set(0, 50, 100);

        // Renderer setup
        galaxyRenderer = new THREE.WebGLRenderer({ canvas: canvas, antialias: true });
        galaxyRenderer.setSize(canvas.clientWidth, canvas.clientHeight);
        galaxyRenderer.shadowMap.enabled = true;
        galaxyRenderer.shadowMap.type = THREE.PCFSoftShadowMap;

        // Controls setup
        if (typeof THREE.OrbitControls !== 'undefined') {
          galaxyControls = new THREE.OrbitControls(galaxyCamera, galaxyRenderer.domElement);
          galaxyControls.enableDamping = true;
          galaxyControls.dampingFactor = 0.05;
          galaxyControls.maxDistance = 500;
          galaxyControls.minDistance = 10;
        }

        // Create starfield
        createStarfield();

        // Create galaxy center
        createGalaxyCenter();

        // Create planets
        createPlanets();

        // Create nebulae
        createNebulae();

        // Add lighting
        const ambientLight = new THREE.AmbientLight(0x404040, 0.4);
        galaxyScene.add(ambientLight);

        const directionalLight = new THREE.DirectionalLight(0xffffff, 1);
        directionalLight.position.set(0, 100, 100);
        directionalLight.castShadow = true;
        galaxyScene.add(directionalLight);

        // Mouse interaction
        setupMouseInteraction();

        // Keyboard controls
        setupKeyboardControls();

        // Start animation loop
        animateGalaxy();

        // Handle window resize
        window.addEventListener('resize', onGalaxyWindowResize);
      }

      function createStarfield() {
        const starGeometry = new THREE.BufferGeometry();
        const starCount = 10000;
        const positions = new Float32Array(starCount * 3);
        const colors = new Float32Array(starCount * 3);

        for (let i = 0; i < starCount; i++) {
          // Random positions in a large sphere
          const radius = Math.random() * 2000 + 500;
          const theta = Math.random() * Math.PI * 2;
          const phi = Math.random() * Math.PI;

          positions[i * 3] = radius * Math.sin(phi) * Math.cos(theta);
          positions[i * 3 + 1] = radius * Math.sin(phi) * Math.sin(theta);
          positions[i * 3 + 2] = radius * Math.cos(phi);

          // Random star colors (white, blue, yellow, red)
          const starType = Math.random();
          if (starType < 0.7) {
            colors[i * 3] = colors[i * 3 + 1] = colors[i * 3 + 2] = 1; // White
          } else if (starType < 0.85) {
            colors[i * 3] = 0.7; colors[i * 3 + 1] = 0.8; colors[i * 3 + 2] = 1; // Blue
          } else if (starType < 0.95) {
            colors[i * 3] = 1; colors[i * 3 + 1] = 1; colors[i * 3 + 2] = 0.7; // Yellow
          } else {
            colors[i * 3] = 1; colors[i * 3 + 1] = 0.7; colors[i * 3 + 2] = 0.7; // Red
          }
        }

        starGeometry.setAttribute('position', new THREE.BufferAttribute(positions, 3));
        starGeometry.setAttribute('color', new THREE.BufferAttribute(colors, 3));

        const starMaterial = new THREE.PointsMaterial({
          size: 2,
          vertexColors: true,
          transparent: true,
          opacity: 0.8
        });

        const stars = new THREE.Points(starGeometry, starMaterial);
        galaxyScene.add(stars);
      }

      function createGalaxyCenter() {
        // Create a glowing galaxy center
        const centerGeometry = new THREE.SphereGeometry(5, 32, 32);
        const centerMaterial = new THREE.MeshBasicMaterial({
          color: 0xffff00,
          transparent: true,
          opacity: 0.8
        });
        const galaxyCenter = new THREE.Mesh(centerGeometry, centerMaterial);
        galaxyCenter.position.set(0, 0, 0);
        galaxyScene.add(galaxyCenter);

        // Add glow effect
        const glowGeometry = new THREE.SphereGeometry(8, 32, 32);
        const glowMaterial = new THREE.MeshBasicMaterial({
          color: 0xffff00,
          transparent: true,
          opacity: 0.3
        });
        const glow = new THREE.Mesh(glowGeometry, glowMaterial);
        galaxyCenter.add(glow);
      }

      function createPlanets() {
        // Get planets from the React state (we'll need to pass this data)
        const planetsData = window.planetsData || [];

        planetsData.forEach((planet, index) => {
          // Create planet mesh
          const planetGeometry = new THREE.SphereGeometry(1 + Math.random() * 2, 16, 16);

          let planetColor;
          switch (planet.type) {
            case 'exoplanet':
              planetColor = 0x10b981;
              break;
            case 'fictional':
              planetColor = 0x8b5cf6;
              break;
            case 'solar':
              planetColor = 0x3b82f6;
              break;
            default:
              planetColor = 0x3b82f6;
          }

          const planetMaterial = new THREE.MeshLambertMaterial({
            color: planetColor,
            transparent: true,
            opacity: 0.9
          });

          const planetMesh = new THREE.Mesh(planetGeometry, planetMaterial);

          // Position planets in a spiral galaxy pattern
          const spiralArm = Math.floor(index / 8);
          const posInArm = index % 8;
          const angle = (spiralArm * 90 + posInArm * 45) * (Math.PI / 180);
          const radius = 20 + (posInArm * 8) + (spiralArm * 3);

          planetMesh.position.x = Math.cos(angle) * radius;
          planetMesh.position.z = Math.sin(angle) * radius;
          planetMesh.position.y = (Math.random() - 0.5) * 10;

          // Store planet data
          planetMesh.userData = planet;

          // Add glow effect
          const glowGeometry = new THREE.SphereGeometry(planetGeometry.parameters.radius * 1.5, 16, 16);
          const glowMaterial = new THREE.MeshBasicMaterial({
            color: planetColor,
            transparent: true,
            opacity: 0.3
          });
          const planetGlow = new THREE.Mesh(glowGeometry, glowMaterial);
          planetMesh.add(planetGlow);

          galaxyScene.add(planetMesh);
          planetMeshes.push(planetMesh);
        });

        // Add our solar system
        const solarSystemGeometry = new THREE.SphereGeometry(2, 16, 16);
        const solarSystemMaterial = new THREE.MeshLambertMaterial({
          color: 0x3b82f6,
          transparent: true,
          opacity: 0.9
        });
        const solarSystem = new THREE.Mesh(solarSystemGeometry, solarSystemMaterial);
        solarSystem.position.set(25, 5, 15);
        solarSystem.userData = {
          name: 'Solar System',
          type: 'solar',
          distance: 0,
          description: 'Our home solar system'
        };

        // Add pulsing ring around solar system
        const ringGeometry = new THREE.RingGeometry(3, 4, 32);
        const ringMaterial = new THREE.MeshBasicMaterial({
          color: 0x3b82f6,
          transparent: true,
          opacity: 0.5,
          side: THREE.DoubleSide
        });
        const ring = new THREE.Mesh(ringGeometry, ringMaterial);
        ring.rotation.x = Math.PI / 2;
        solarSystem.add(ring);

        galaxyScene.add(solarSystem);
        planetMeshes.push(solarSystem);
      }

      function createNebulae() {
        // Create colorful nebula clouds
        const nebulaColors = [0xff00ff, 0x00ffff, 0xff8800];

        nebulaColors.forEach((color, index) => {
          const nebulaGeometry = new THREE.SphereGeometry(15, 8, 8);
          const nebulaMaterial = new THREE.MeshBasicMaterial({
            color: color,
            transparent: true,
            opacity: 0.1
          });
          const nebula = new THREE.Mesh(nebulaGeometry, nebulaMaterial);

          nebula.position.x = (Math.random() - 0.5) * 200;
          nebula.position.y = (Math.random() - 0.5) * 50;
          nebula.position.z = (Math.random() - 0.5) * 200;

          galaxyScene.add(nebula);
        });
      }

      function setupMouseInteraction() {
        const raycaster = new THREE.Raycaster();
        const mouse = new THREE.Vector2();

        function onMouseMove(event) {
          const canvas = document.getElementById('galaxy-canvas');
          const rect = canvas.getBoundingClientRect();

          mouse.x = ((event.clientX - rect.left) / rect.width) * 2 - 1;
          mouse.y = -((event.clientY - rect.top) / rect.height) * 2 + 1;

          raycaster.setFromCamera(mouse, galaxyCamera);
          const intersects = raycaster.intersectObjects(planetMeshes);

          // Reset all planet materials
          planetMeshes.forEach(mesh => {
            mesh.material.emissive.setHex(0x000000);
          });

          if (intersects.length > 0) {
            const planet = intersects[0].object;
            planet.material.emissive.setHex(0x444444);

            // Show planet info
            showPlanetInfo(planet.userData, event.clientX, event.clientY);
            document.body.style.cursor = 'pointer';
          } else {
            hidePlanetInfo();
            document.body.style.cursor = 'default';
          }
        }

        function onMouseClick(event) {
          const canvas = document.getElementById('galaxy-canvas');
          const rect = canvas.getBoundingClientRect();

          mouse.x = ((event.clientX - rect.left) / rect.width) * 2 - 1;
          mouse.y = -((event.clientY - rect.top) / rect.height) * 2 + 1;

          raycaster.setFromCamera(mouse, galaxyCamera);
          const intersects = raycaster.intersectObjects(planetMeshes);

          if (intersects.length > 0) {
            const planet = intersects[0].object;
            selectPlanet(planet);
          }
        }

        const canvas = document.getElementById('galaxy-canvas');
        canvas.addEventListener('mousemove', onMouseMove);
        canvas.addEventListener('click', onMouseClick);
      }

      function showPlanetInfo(planetData, x, y) {
        const panel = document.getElementById('planet-info-panel');
        const nameEl = document.getElementById('planet-info-name');
        const detailsEl = document.getElementById('planet-info-details');

        // Store current hovered planet for the explore button
        window.currentHoveredPlanet = planetData;

        nameEl.textContent = planetData.name || 'Unknown Planet';
        detailsEl.innerHTML = `
          <div>Type: ${planetData.type || 'Unknown'}</div>
          <div>Distance: ${planetData.distance?.toFixed(1) || 'Unknown'} light-years</div>
          <div>Temperature: ${planetData.temperature || 'Unknown'}</div>
          <div>Gravity: ${planetData.gravity || 'Unknown'}</div>
        `;

        panel.style.opacity = '1';
        panel.style.pointerEvents = 'auto';
      }

      function hidePlanetInfo() {
        const panel = document.getElementById('planet-info-panel');
        panel.style.opacity = '0';
        panel.style.pointerEvents = 'none';
        window.currentHoveredPlanet = null;
      }

      function selectPlanet(planetMesh) {
        const planetData = planetMesh.userData;

        // Animate camera to planet
        const targetPosition = planetMesh.position.clone();
        targetPosition.y += 10;
        targetPosition.z += 20;

        // Smooth camera animation
        const startPosition = galaxyCamera.position.clone();
        const startTime = Date.now();
        const duration = 2000; // 2 seconds

        function animateCamera() {
          const elapsed = Date.now() - startTime;
          const progress = Math.min(elapsed / duration, 1);

          // Easing function
          const easeProgress = 1 - Math.pow(1 - progress, 3);

          galaxyCamera.position.lerpVectors(startPosition, targetPosition, easeProgress);
          galaxyCamera.lookAt(planetMesh.position);

          if (progress < 1) {
            requestAnimationFrame(animateCamera);
          } else {
            // After animation, navigate to planet details
            setTimeout(() => {
              // Trigger React state update to show planet details
              if (window.setSelectedPlanet && window.setCurrentPage) {
                window.setSelectedPlanet(planetData);
                window.setCurrentPage('planet-details');
              }
            }, 500);
          }
        }

        animateCamera();
      }

      function setupKeyboardControls() {
        document.addEventListener('keydown', (event) => {
          switch (event.key.toLowerCase()) {
            case 'r':
              // Reset camera
              galaxyCamera.position.set(0, 50, 100);
              galaxyCamera.lookAt(0, 0, 0);
              if (galaxyControls) {
                galaxyControls.reset();
              }
              break;
            case 'f':
              // Find Earth (Solar System)
              const solarSystem = planetMeshes.find(mesh =>
                mesh.userData.name === 'Solar System'
              );
              if (solarSystem) {
                selectPlanet(solarSystem);
              }
              break;
          }
        });
      }

      function animateGalaxy() {
        if (!galaxyScene || !galaxyCamera || !galaxyRenderer) return;

        requestAnimationFrame(animateGalaxy);

        // Rotate planets
        planetMeshes.forEach((planet, index) => {
          planet.rotation.y += 0.01 + (index * 0.001);

          // Gentle floating motion
          planet.position.y += Math.sin(Date.now() * 0.001 + index) * 0.01;
        });

        // Update controls
        if (galaxyControls) {
          galaxyControls.update();
        }

        galaxyRenderer.render(galaxyScene, galaxyCamera);
      }

      function onGalaxyWindowResize() {
        const canvas = document.getElementById('galaxy-canvas');
        if (!canvas || !galaxyCamera || !galaxyRenderer) return;

        galaxyCamera.aspect = canvas.clientWidth / canvas.clientHeight;
        galaxyCamera.updateProjectionMatrix();
        galaxyRenderer.setSize(canvas.clientWidth, canvas.clientHeight);
      }

      // 3D Planet Viewer Implementation
      let planetScene, planetCamera, planetRenderer, planetControls;
      let planetMesh, planetRotating = true;

      function initializePlanetViewer(planetData) {
        const canvas = document.getElementById('planet-canvas');
        if (!canvas) return;

        // Clean up previous scene
        if (planetRenderer) {
          planetRenderer.dispose();
        }

        // Scene setup
        planetScene = new THREE.Scene();
        planetScene.background = new THREE.Color(0x000011);

        // Camera setup
        planetCamera = new THREE.PerspectiveCamera(75, 1, 0.1, 1000);
        planetCamera.position.set(0, 0, 5);

        // Renderer setup
        planetRenderer = new THREE.WebGLRenderer({ canvas: canvas, antialias: true });
        planetRenderer.setSize(canvas.clientWidth, canvas.clientHeight);
        planetRenderer.shadowMap.enabled = true;
        planetRenderer.shadowMap.type = THREE.PCFSoftShadowMap;

        // Controls setup
        if (typeof THREE.OrbitControls !== 'undefined') {
          planetControls = new THREE.OrbitControls(planetCamera, planetRenderer.domElement);
          planetControls.enableDamping = true;
          planetControls.dampingFactor = 0.05;
          planetControls.maxDistance = 10;
          planetControls.minDistance = 2;
          planetControls.enablePan = false;
        }

        // Create planet
        createPlanet(planetData);

        // Add lighting
        const ambientLight = new THREE.AmbientLight(0x404040, 0.6);
        planetScene.add(ambientLight);

        const directionalLight = new THREE.DirectionalLight(0xffffff, 1);
        directionalLight.position.set(5, 5, 5);
        directionalLight.castShadow = true;
        planetScene.add(directionalLight);

        // Add starfield background
        createPlanetStarfield();

        // Start animation
        animatePlanet();

        // Handle resize
        const resizeObserver = new ResizeObserver(() => {
          if (planetCamera && planetRenderer) {
            planetCamera.aspect = canvas.clientWidth / canvas.clientHeight;
            planetCamera.updateProjectionMatrix();
            planetRenderer.setSize(canvas.clientWidth, canvas.clientHeight);
          }
        });
        resizeObserver.observe(canvas);
      }

      function createPlanet(planetData) {
        // Create planet geometry
        const planetGeometry = new THREE.SphereGeometry(2, 64, 64);

        // Determine planet color and properties based on type
        let planetColor, emissiveColor, roughness, metalness;

        switch (planetData.type) {
          case 'exoplanet':
            planetColor = 0x10b981;
            emissiveColor = 0x004d40;
            roughness = 0.8;
            metalness = 0.1;
            break;
          case 'fictional':
            planetColor = 0x8b5cf6;
            emissiveColor = 0x4c1d95;
            roughness = 0.6;
            metalness = 0.3;
            break;
          case 'solar':
            planetColor = 0x3b82f6;
            emissiveColor = 0x1e40af;
            roughness = 0.7;
            metalness = 0.2;
            break;
          default:
            planetColor = 0x3b82f6;
            emissiveColor = 0x1e40af;
            roughness = 0.7;
            metalness = 0.2;
        }

        // Create planet material with realistic properties
        const planetMaterial = new THREE.MeshPhongMaterial({
          color: planetColor,
          emissive: emissiveColor,
          emissiveIntensity: 0.1,
          shininess: 30,
          transparent: true,
          opacity: 0.95
        });

        planetMesh = new THREE.Mesh(planetGeometry, planetMaterial);
        planetScene.add(planetMesh);

        // Add atmosphere glow
        const atmosphereGeometry = new THREE.SphereGeometry(2.1, 32, 32);
        const atmosphereMaterial = new THREE.MeshBasicMaterial({
          color: planetColor,
          transparent: true,
          opacity: 0.2,
          side: THREE.BackSide
        });
        const atmosphere = new THREE.Mesh(atmosphereGeometry, atmosphereMaterial);
        planetScene.add(atmosphere);

        // Add cloud layer for some planets
        if (planetData.atmosphere && planetData.atmosphere !== 'None') {
          const cloudGeometry = new THREE.SphereGeometry(2.05, 32, 32);
          const cloudMaterial = new THREE.MeshLambertMaterial({
            color: 0xffffff,
            transparent: true,
            opacity: 0.3
          });
          const clouds = new THREE.Mesh(cloudGeometry, cloudMaterial);
          planetMesh.add(clouds);

          // Animate clouds
          clouds.userData = { rotationSpeed: 0.005 };
        }

        // Add rings for gas giants
        if (planetData.name && (planetData.name.toLowerCase().includes('saturn') ||
            planetData.name.toLowerCase().includes('ring') ||
            Math.random() > 0.8)) {
          const ringGeometry = new THREE.RingGeometry(2.5, 3.5, 64);
          const ringMaterial = new THREE.MeshBasicMaterial({
            color: 0xaaaaaa,
            transparent: true,
            opacity: 0.6,
            side: THREE.DoubleSide
          });
          const rings = new THREE.Mesh(ringGeometry, ringMaterial);
          rings.rotation.x = Math.PI / 2 + (Math.random() - 0.5) * 0.5;
          planetMesh.add(rings);
        }
      }

      function createPlanetStarfield() {
        const starGeometry = new THREE.BufferGeometry();
        const starCount = 1000;
        const positions = new Float32Array(starCount * 3);

        for (let i = 0; i < starCount; i++) {
          positions[i * 3] = (Math.random() - 0.5) * 200;
          positions[i * 3 + 1] = (Math.random() - 0.5) * 200;
          positions[i * 3 + 2] = (Math.random() - 0.5) * 200;
        }

        starGeometry.setAttribute('position', new THREE.BufferAttribute(positions, 3));

        const starMaterial = new THREE.PointsMaterial({
          color: 0xffffff,
          size: 1,
          transparent: true,
          opacity: 0.8
        });

        const stars = new THREE.Points(starGeometry, starMaterial);
        planetScene.add(stars);
      }

      function animatePlanet() {
        if (!planetScene || !planetCamera || !planetRenderer) return;

        requestAnimationFrame(animatePlanet);

        // Rotate planet
        if (planetMesh && planetRotating) {
          planetMesh.rotation.y += 0.01;

          // Rotate clouds if they exist
          planetMesh.children.forEach(child => {
            if (child.userData.rotationSpeed) {
              child.rotation.y += child.userData.rotationSpeed;
            }
          });
        }

        // Update controls
        if (planetControls) {
          planetControls.update();
        }

        planetRenderer.render(planetScene, planetCamera);
      }

      function togglePlanetRotation() {
        planetRotating = !planetRotating;
        const button = document.getElementById('planet-rotate-toggle');
        if (button) {
          button.textContent = planetRotating ? 'â¸ï¸ Pause' : 'â–¶ï¸ Play';
        }
      }

      function resetPlanetView() {
        if (planetCamera && planetControls) {
          planetCamera.position.set(0, 0, 5);
          planetControls.reset();
        }
      }

      function updateTravelTime(speed) {
        const speedKmh = parseInt(speed);
        const planet = window.currentSelectedPlanet;

        if (planet && planet.distance) {
          // Convert light-years to km and calculate travel time
          const distanceKm = planet.distance * 9.461e12; // 1 light-year in km
          const timeHours = distanceKm / speedKmh;
          const timeDays = Math.ceil(timeHours / 24);

          // Update UI
          const speedEl = document.getElementById('travel-speed');
          const timeEl = document.getElementById('travel-time');

          if (speedEl) speedEl.textContent = `${speedKmh.toLocaleString()} km/h`;
          if (timeEl) {
            if (timeDays > 365) {
              const years = Math.ceil(timeDays / 365);
              timeEl.textContent = `${years} years`;
            } else {
              timeEl.textContent = `${timeDays} days`;
            }
          }
        }
      }

      // Expose functions globally for React integration
      window.initializeGalaxyMap = initializeGalaxyMap;
      window.onGalaxyWindowResize = onGalaxyWindowResize;
      window.initializePlanetViewer = initializePlanetViewer;
      window.togglePlanetRotation = togglePlanetRotation;
      window.resetPlanetView = resetPlanetView;
      window.updateTravelTime = updateTravelTime;
    </script>
  </body>
</html>
